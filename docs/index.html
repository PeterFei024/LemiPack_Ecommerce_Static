<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>乐美包装电商平台</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
<style>
    html { min-height: 100%; }
    body { min-height: 100vh; display: flex; flex-direction: column; }
    main { flex: 1 0 auto; }
    footer { flex-shrink: 0; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .tab-content { display: none; }
    .tab-active { display: block; }
    .step { display: none; }
    .step-active { display: block; }
    .submenu-section { display: none; }
    .submenu-section-active { display: block; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .sku-table-row { transition: background-color 0.2s ease; }
    .sku-table-row:hover { background-color: #eff6ff; }
    #skuDetailContainer > div { animation: fadeIn 0.3s ease-in; }
    #companyInfoModal > div { animation: slideUp 0.3s ease-out; }
  </style>
</head>
<body class="bg-gray-100">
<!-- 顶部导航 -->
<header class="bg-blue-800 text-white sticky top-0 z-50 h-20 shadow-lg">
<div class="container mx-auto px-4 flex items-center justify-between h-full">
<div class="flex items-center pl-0">
<span class="iconify text-2xl" data-icon="mdi:package-variant"></span>
<h1 class="text-lg font-bold ml-2 whitespace-nowrap">乐美包装</h1>
</div>
<nav class="flex items-center space-x-4 flex-1 justify-center">
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="home" data-i18n="nav.home">首页</button>
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="configurator" data-i18n="nav.configurator">订单配置</button>
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="orders" data-i18n="nav.orders">我的订单</button>
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="finance" data-i18n="nav.finance">财务信息</button>
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="design-management" data-i18n="nav.design-management">画稿管理</button>
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="design-management-new" data-i18n="nav.design-management-new">画稿管理（新）</button>
<button class="tab-btn py-2 px-3 rounded-lg hover:bg-blue-700 transition text-sm whitespace-nowrap" data-tab="contact" data-i18n="nav.contact">联系我们</button>
</nav>
<div class="flex items-center space-x-3 flex-shrink-0">
<div class="relative">
<input id="searchInput" class="bg-blue-700 rounded-full py-1.5 pl-3 pr-20 text-white placeholder-blue-200 w-64 text-sm" placeholder="搜索产品..." type="text" data-i18n="nav.search-placeholder"/>
<span class="iconify absolute right-10 top-1.5 text-blue-200 text-sm pointer-events-none" data-icon="mdi:magnify"></span>
<button id="imageSearchBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-200 hover:text-white transition cursor-pointer" data-i18n-title="nav.image-search" title="图片搜索">
<span class="iconify text-sm" data-icon="mdi:camera"></span>
</button>
<!-- 图片粘贴区域 -->
<div id="imagePasteArea" class="hidden absolute top-full left-0 mt-2 bg-white rounded-lg shadow-lg border border-gray-200 p-4 w-64 z-50">
<div class="flex items-center justify-between mb-3">
<h4 class="text-sm font-semibold text-gray-800">图片搜索</h4>
<button id="closeImagePasteArea" class="text-gray-400 hover:text-gray-600">
<span class="iconify text-sm" data-icon="mdi:close"></span>
</button>
</div>
<div id="pasteImageContainer" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500 transition min-h-32 flex flex-col items-center justify-center">
<div id="pasteImagePlaceholder">
<span class="iconify text-3xl text-gray-400 mb-2" data-icon="mdi:image-plus"></span>
<p class="text-xs text-gray-500">粘贴图片或拖拽图片到这里</p>
<p class="text-xs text-gray-400 mt-1">支持 JPG、PNG 格式</p>
</div>
<img id="pastedImagePreview" class="hidden max-w-full max-h-48 rounded" alt="粘贴的图片"/>
</div>
<div id="imageSearchActions" class="hidden mt-3 flex space-x-2">
<button id="searchByImageBtn" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg text-sm font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:magnify"></span>
搜索相似图片
</button>
<button id="clearImageBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg text-sm">
清除
</button>
</div>
</div>
</div>
<button id="cartBtn" class="bg-green-600 hover:bg-green-500 text-white py-1.5 px-4 rounded-full flex items-center text-sm whitespace-nowrap relative">
<span class="iconify mr-1 text-sm" data-icon="mdi:cart"></span><span data-i18n="nav.cart">购物车</span>
<span id="cartCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
        </button>
<div class="relative">
<select id="languageSelect" class="bg-blue-700 hover:bg-blue-600 text-white py-1.5 px-3 rounded-lg cursor-pointer appearance-none pr-6 border border-blue-600 text-sm">
<option value="zh">中文</option>
<option value="en">English</option>
</select>
<span class="iconify absolute right-1 top-1.5 text-white pointer-events-none text-sm" data-icon="mdi:chevron-down"></span>
</div>
<div class="bg-blue-700 rounded-lg px-3 py-1.5 text-xs max-w-xs cursor-pointer hover:bg-blue-600 transition group" id="companyInfoBtn" title="点击查看公司详细信息">
<div class="text-white font-semibold whitespace-nowrap flex items-center">
<span id="companyNameDisplay">章三包装有限公司</span>
<span class="iconify ml-1 text-xs transition-transform group-hover:translate-y-0.5" data-icon="mdi:chevron-down"></span>
</div>
</div>
</div>
</div>
</header>
<!-- 页面内容区 -->
<main class="container mx-auto p-6 max-w-6xl">
<!-- 首页 -->
<section class="tab-content tab-active" id="home">
<div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6" data-i18n="home.company-intro">公司介绍</h2>
<div class="flex items-center">
<div class="w-2/3 pr-8">
<p class="text-gray-700 mb-4 leading-relaxed" data-i18n="home.company-desc1">
              乐美包装是领先的包装材料解决方案提供商，专注于为食品饮料、电子产品等行业提供高质量包装产品。拥有超过10年行业经验，服务全球500+企业客户。
            </p>
<p class="text-gray-700 mb-6 leading-relaxed" data-i18n="home.company-desc2">
              我们提供纸箱、泡沫、胶带等全品类包装材料，支持定制化设计和批量生产，满足不同行业的包装需求。
            </p>
<div class="flex space-x-4">
<button class="bg-blue-600 hover:bg-blue-500 text-white py-3 px-8 rounded-full font-semibold transition" data-i18n="home.learn-more">
                了解更多
              </button>
<button class="bg-green-600 hover:bg-green-500 text-white py-3 px-8 rounded-full font-semibold transition" data-i18n="home.free-sample">
                免费样品
              </button>
</div>
</div>
<div class="w-1/3">
<img alt="Company building exterior view" class="rounded-xl shadow-md" id="1" src="lemipack_images/home_1.png"/>
</div>
</div>
</div>
<div class="bg-white rounded-2xl shadow-lg p-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6" data-i18n="home.hot-products">热销产品</h2>
<div class="grid grid-cols-3 gap-8">
<!-- 产品卡片 -->
<div class="product-card bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden transition hover:shadow-lg">
<img alt="Cardboard box for packaging" class="w-full h-48 object-cover" id="2" src="lemipack_images/standard_1.png"/>
<div class="p-5">
<h3 class="text-lg font-semibold text-gray-800 mb-2">200S食品包装盒</h3>
<div class="flex justify-between mb-3">
<span class="text-gray-600">规格: 200S</span>
<span class="text-green-600 font-bold">¥45.80/箱</span>
</div>
<div class="flex justify-between">
<button class="text-blue-600 hover:text-blue-500 flex items-center">
<span class="iconify mr-1" data-icon="mdi:eye"></span> 详情
                </button>
<button class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                  加入购物车
                </button>
</div>
</div>
</div>
<div class="product-card bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden transition hover:shadow-lg">
<img alt="Foam packaging material" class="w-full h-48 object-cover" id="3" src="lemipack_images/standard_2.png"/>
<div class="p-5">
<h3 class="text-lg font-semibold text-gray-800 mb-2">EPE泡沫包装</h3>
<div class="flex justify-between mb-3">
<span class="text-gray-600">规格: 50×30cm</span>
<span class="text-green-600 font-bold">¥28.50/卷</span>
</div>
<div class="flex justify-between">
<button class="text-blue-600 hover:text-blue-500 flex items-center">
<span class="iconify mr-1" data-icon="mdi:eye"></span> 详情
                </button>
<button class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                  加入购物车
                </button>
</div>
</div>
</div>
<div class="product-card bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden transition hover:shadow-lg">
<img alt="Custom printed packaging tape" class="w-full h-48 object-cover" id="4" src="lemipack_images/standard_3.png"/>
<div class="p-5">
<h3 class="text-lg font-semibold text-gray-800 mb-2">定制胶带</h3>
<div class="flex justify-between mb-3">
<span class="text-gray-600">规格: 48mm×100m</span>
<span class="text-green-600 font-bold">¥15.20/卷</span>
</div>
<div class="flex justify-between">
<button class="text-blue-600 hover:text-blue-500 flex items-center">
<span class="iconify mr-1" data-icon="mdi:eye"></span> 详情
                </button>
<button class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm">
                  加入购物车
                </button>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- 订单配置工具 -->
<section class="tab-content" id="configurator">
<div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
<div class="flex justify-between items-center mb-8">
<h2 class="text-2xl font-bold text-blue-800">订单配置工具</h2>
<div class="flex space-x-2">
<button class="step-btn bg-blue-600 text-white px-4 py-2 rounded-lg" data-step="step1">选择配置与设计</button>
<button class="step-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg" data-step="step2">下单</button>
</div>
</div>
<!-- 步骤1: 选择配置与设计（合并后的步骤） -->
<div class="step step-active" id="step1">
<div class="flex justify-between items-center mb-6">
<h3 class="text-xl font-semibold text-gray-800">选择配置与设计</h3>
<div class="flex items-center space-x-2">
<input id="filter-search" class="filter-input bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 w-64" type="text" placeholder="搜索设计描述/产品代码..."/>
<span class="iconify text-gray-400" data-icon="mdi:magnify"></span>
</div>
</div>
<div class="flex gap-6">
<!-- 左侧筛选条件区域（占1/3） -->
<div class="w-1/3 bg-gray-50 rounded-xl p-6 border border-gray-200">
<h4 class="text-lg font-semibold text-gray-800 mb-4">筛选条件</h4>
<div class="space-y-4">
<div>
<label class="block text-gray-700 mb-2 font-medium">规格选择 (Format)</label>
<select id="filter-format" class="filter-select w-full bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100">
<option value="">全部规格</option>
<option value="200S">200S 160C*4.2U-Straw</option>
<option value="LBA1000B">LBA1000B</option>
<option value="LBA100B-H">LBA100B-H</option>
<option value="1000B">1000B</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2 font-medium">灌装机型号</label>
<select id="filter-machine" class="filter-select w-full bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100">
<option value="">全部型号</option>
<option value="Tetra Pak A3">Tetra Pak A3</option>
<option value="SIG CFA122">SIG CFA122</option>
<option value="乐美 LP200">乐美 LP200</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2 font-medium">填充物类型</label>
<select id="filter-filling" class="filter-select w-full bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100">
<option value="">全部类型</option>
<option value="UHT牛奶">UHT牛奶</option>
<option value="果汁">果汁</option>
<option value="豆奶">豆奶</option>
<option value="乳制品">乳制品</option>
<option value="汤类">汤类</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2 font-medium">材料结构</label>
<select id="filter-material" class="filter-select w-full bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100">
<option value="">全部材料</option>
<option value="PE-Al-Paper">PE-Al-Paper</option>
<option value="PET-Paper">PET-Paper</option>
<option value="Paper">Paper</option>
<option value="PP">PP</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2 font-medium">产品组</label>
<select id="filter-product-group" class="filter-select w-full bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100">
<option value="">全部产品组</option>
<option value="10-无菌包">10-无菌包</option>
<option value="20-标准包">20-标准包</option>
<option value="30-定制包">30-定制包</option>
<option value="40-特殊包">40-特殊包</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2 font-medium">系列</label>
<select id="filter-series" class="filter-select w-full bg-white border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-100">
<option value="">全部系列</option>
<option value="片材">片材</option>
<option value="卷材">卷材</option>
<option value="盖子">盖子</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2 font-medium">认证要求</label>
<div class="space-y-2">
<label class="flex items-center">
<input id="filter-pefc" class="filter-checkbox rounded text-blue-600" type="checkbox"/>
<span class="ml-2">PEFC</span>
</label>
<label class="flex items-center">
<input id="filter-fsc" class="filter-checkbox rounded text-blue-600" type="checkbox"/>
<span class="ml-2">FSC</span>
</label>
</div>
</div>
</div>
</div>
<!-- 右侧产品展示区域（占2/3） -->
<div class="w-2/3">
<div id="products-container" class="space-y-6">
<!-- 产品将按规格分类显示在这里 -->
</div>
</div>
</div>
<div class="mt-8 flex justify-end">
<button class="next-step bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold" data-target="step2">
              下一步
            </button>
</div>
</div>
<!-- 步骤2: Order Placing -->
<div class="step" id="step2">
<h3 class="text-xl font-semibold text-gray-800 mb-6">下单 (Order Placing)</h3>
<div class="flex mb-8 gap-8">
<div class="w-1/2">
<div class="bg-gray-100 rounded-xl p-4 mb-4 overflow-hidden">
<img alt="产品主图" class="w-full h-96 object-cover rounded-lg mb-3" id="mainProductImg" src="customer_designs/RFG/RFG-1.jpg"/>
<div class="flex space-x-2 overflow-x-auto">
<img alt="细节图1" class="w-20 h-20 object-cover rounded cursor-pointer border-2 border-gray-300 hover:border-blue-600 transition" onclick="document.getElementById('mainProductImg').src=this.src" src="customer_designs/RFG/RFG-2.jpg"/>
<img alt="细节图2" class="w-20 h-20 object-cover rounded cursor-pointer border-2 border-gray-300 hover:border-blue-600 transition" onclick="document.getElementById('mainProductImg').src=this.src" src="customer_designs/RFG/RFG-3.jpg"/>
<img alt="细节图4" class="w-20 h-20 object-cover rounded cursor-pointer border-2 border-gray-300 hover:border-blue-600 transition" onclick="document.getElementById('mainProductImg').src=this.src" src="customer_designs/RFG/RFG-4.jpg"/>
<img alt="细节图4" class="w-20 h-20 object-cover rounded cursor-pointer border-2 border-gray-300 hover:border-blue-600 transition" onclick="document.getElementById('mainProductImg').src=this.src" src="customer_designs/RFG/RFG-5.jpg"/>
<img alt="细节图4" class="w-20 h-20 object-cover rounded cursor-pointer border-2 border-gray-300 hover:border-blue-600 transition" onclick="document.getElementById('mainProductImg').src=this.src" src="customer_designs/RFG/RFG-6.jpg"/>
</div>
</div>
</div>
<div class="w-1/2">
<div class="bg-gray-50 rounded-xl p-6 mb-6">
<h4 class="font-semibold text-lg text-gray-800 mb-4">产品信息</h4>
<div class="space-y-3">
<div class="flex justify-between">
<span class="text-gray-600">产品名称:</span>
<span class="font-medium" id="orderProductName">饮料包装设计 #DRK-2023</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">物料号:</span>
<span class="font-medium" id="orderMaterialNumber">NP-20345-1</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">规格:</span>
<span class="font-medium" id="orderFormat">200S</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">材料结构:</span>
<span class="font-medium" id="orderMaterial">PE-Al-Paper</span>
</div>
</div>
</div>
<div class="bg-gray-50 rounded-xl p-6">
<h4 class="font-semibold text-lg text-gray-800 mb-4">采购信息</h4>
<div class="space-y-4">
<div>
<label class="block text-gray-700 mb-2">数量</label>
<div class="flex items-center">
<button class="bg-gray-200 px-4 py-2 rounded-l-lg" onclick="decreaseQuantity()">-</button>
<input id="orderQuantity" class="w-20 text-center border-y border-gray-200 py-2" type="number" value="100" min="1"/>
<button class="bg-gray-200 px-4 py-2 rounded-r-lg" onclick="increaseQuantity()">+</button>
<span class="ml-4 text-gray-600">(单位: 箱)</span>
</div>
</div>
<div>
<label class="block text-gray-700 mb-2">期望送达日期</label>
<input class="w-full bg-white border border-gray-300 rounded-lg px-4 py-2" type="date"/>
</div>
<div>
<label class="block text-gray-700 mb-2">特殊要求</label>
<textarea class="w-full bg-white border border-gray-300 rounded-lg px-4 py-2"></textarea>
</div>
</div>
</div>
</div>
</div>
<div class="mt-8 flex justify-between">
<button class="prev-step bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-3 rounded-lg font-semibold" data-target="step1">
              上一步
            </button>
<div class="flex space-x-3">
<button class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center" onclick="addToCart()">
              <span class="iconify mr-2" data-icon="mdi:cart"></span>
              加入购物车
            </button>
<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold" onclick="confirmOrder()">
              确认下单
            </button>
</div>
</div>
</div>
</div>
</section>
<!-- 我的订单 -->
<section class="tab-content" id="orders">
<!-- 订单列表 -->
<div id="ordersList">
<div class="bg-white rounded-2xl shadow-lg p-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6" data-i18n="orders.title">我的订单</h2>
<div class="flex items-center justify-between mb-6">
<div class="flex">
<input class="bg-gray-50 border border-gray-300 rounded-l-lg px-4 py-2 w-64" placeholder="搜索订单号..." type="text"/>
<button class="bg-blue-600 text-white px-6 py-2 rounded-r-lg">
<span class="iconify align-middle" data-icon="mdi:magnify"></span>
</button>
</div>
<div class="flex space-x-2">
<select class="bg-gray-50 border border-gray-300 rounded-lg px-4 py-2">
<option>全部状态</option>
<option>待审核</option>
<option>待客户确认</option>
<option>已确认</option>
<option>已完成</option>
</select>
<select class="bg-gray-50 border border-gray-300 rounded-lg px-4 py-2">
<option>最近30天</option>
<option>本月</option>
<option>上个月</option>
<option>2025年</option>
</select>
</div>
</div>
<div class="bg-gray-50 rounded-lg overflow-hidden">
<div class="grid grid-cols-7 px-4 py-3 bg-gray-100 font-semibold text-gray-700">
<div>订单号</div>
<div>日期</div>
<div>产品</div>
<div>数量</div>
<div>金额</div>
<div>状态</div>
<div>操作</div>
</div>
<!-- 订单行 -->
<div class="grid grid-cols-7 px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
<div class="text-blue-600">ORD-20251118-001</div>
<div>2025-11-18</div>
<div>饮料包装盒</div>
<div>100箱</div>
<div>¥4,900.00</div>
<div><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">待审核</span></div>
<div>
<button class="view-order-btn text-blue-600 hover:text-blue-500 flex items-center text-sm" data-order-id="ORD-20251118-001">
<span class="iconify mr-1" data-icon="mdi:eye"></span>查看
              </button>
</div>
</div>
<!-- 更多订单行 -->
<div class="grid grid-cols-7 px-4 py-3 border-b border-gray-200 hover:bg-gray-100">
<div class="text-blue-600">ORD-20251115-045</div>
<div>2025-11-15</div>
<div>EPE泡沫卷</div>
<div>50卷</div>
<div>¥1,425.00</div>
<div><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">已完成</span></div>
<div>
<button class="view-order-btn text-blue-600 hover:text-blue-500 flex items-center text-sm" data-order-id="ORD-20251115-045">
<span class="iconify mr-1" data-icon="mdi:eye"></span>查看
              </button>
</div>
</div>
</div>
<!-- 分页 -->
<div class="mt-6 flex justify-between items-center">
<div class="text-gray-600">显示 1-2 条，共 24 条</div>
<div class="flex space-x-2">
<button class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg">上一页</button>
<button class="bg-blue-600 text-white px-4 py-2 rounded-lg">1</button>
<button class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg">2</button>
<button class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg">下一页</button>
</div>
</div>
</div>
</div>
<!-- 订单详情 -->
<div id="orderDetail" class="hidden">
<div class="bg-white rounded-2xl shadow-lg p-8">
<!-- 面包屑导航 -->
<div class="mb-6">
<nav class="flex items-center space-x-2 text-sm">
<a href="#" id="breadcrumbOrders" class="text-blue-600 hover:text-blue-800">我的订单</a>
<span class="text-gray-400">/</span>
<span class="text-gray-600" id="breadcrumbCurrent">订单详情</span>
</nav>
</div>
<div class="flex items-center mb-6">
<button id="backToOrdersList" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg mr-4 flex items-center">
<span class="iconify mr-2" data-icon="mdi:arrow-left"></span>返回订单列表
</button>
<h2 class="text-2xl font-bold text-blue-800">订单详情</h2>
</div>
<!-- 订单详情内容 -->
<div id="orderDetailContent">
<!-- 订单状态流程 -->
<div class="mb-6 bg-gray-50 rounded-xl p-6">
<h3 class="text-lg font-semibold text-gray-800 mb-4">订单状态流程</h3>
<div class="flex items-center justify-between relative">
<div class="flex flex-col items-center flex-1 relative">
<div class="w-12 h-12 rounded-full bg-green-500 text-white flex items-center justify-center font-bold mb-2 z-10">1</div>
<div class="text-sm font-medium text-gray-800">已下单</div>
<div class="text-xs text-gray-500 mt-1">2025-11-18 10:30</div>
<div class="absolute top-6 left-1/2 w-full h-0.5 bg-green-500 z-0"></div>
</div>
<div class="flex flex-col items-center flex-1 relative">
<div class="w-12 h-12 rounded-full bg-green-500 text-white flex items-center justify-center font-bold mb-2 z-10">2</div>
<div class="text-sm font-medium text-gray-800">待审核</div>
<div class="text-xs text-gray-500 mt-1">当前状态</div>
<div class="absolute top-6 left-1/2 w-full h-0.5 bg-gray-300 z-0"></div>
</div>
<div class="flex flex-col items-center flex-1 relative">
<div class="w-12 h-12 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center font-bold mb-2 z-10">3</div>
<div class="text-sm font-medium text-gray-600">待客户确认</div>
<div class="absolute top-6 left-1/2 w-full h-0.5 bg-gray-300 z-0"></div>
</div>
<div class="flex flex-col items-center flex-1 relative">
<div class="w-12 h-12 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center font-bold mb-2 z-10">4</div>
<div class="text-sm font-medium text-gray-600">已确认</div>
<div class="absolute top-6 left-1/2 w-full h-0.5 bg-gray-300 z-0"></div>
</div>
<div class="flex flex-col items-center flex-1">
<div class="w-12 h-12 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center font-bold mb-2">5</div>
<div class="text-sm font-medium text-gray-600">已完成</div>
</div>
</div>
</div>
<!-- 操作按钮区域 -->
<div class="bg-blue-50 rounded-xl p-6 border border-blue-200 mb-6">
<h4 class="font-semibold text-lg text-blue-800 mb-4">订单操作</h4>
<div class="grid grid-cols-3 gap-4">
<button class="bg-green-600 hover:bg-green-500 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:cart-plus"></span>一键复购
</button>
<button class="bg-blue-600 hover:bg-blue-500 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:truck"></span>查看订单物流信息
</button>
<button class="bg-yellow-600 hover:bg-yellow-500 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:file-edit"></span>发起修改申请
</button>
<button id="openComplaintBtn" class="bg-red-600 hover:bg-red-500 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:alert-circle"></span>发起客诉
</button>
<button class="bg-purple-600 hover:bg-purple-500 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:file-download"></span>导出订单信息
</button>
<button class="bg-indigo-600 hover:bg-indigo-500 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center">
<span class="iconify mr-2" data-icon="mdi:receipt"></span>导出发票信息
</button>
</div>
</div>
<!-- 订单基本信息 -->
<div class="bg-gray-50 rounded-xl p-6 mb-6">
<h4 class="font-semibold text-lg text-gray-800 mb-4">订单基本信息</h4>
<div class="grid grid-cols-4 gap-4">
<div>
<label class="block text-gray-600 mb-1 text-sm">订单号</label>
<div class="text-gray-800 font-medium" id="orderDetailNumber">ORD-20251118-001</div>
</div>
<div>
<label class="block text-gray-600 mb-1 text-sm">下单时间</label>
<div class="text-gray-800 font-medium">2025-11-18 10:30</div>
</div>
<div>
<label class="block text-gray-600 mb-1 text-sm">订单状态</label>
<div><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">待审核</span></div>
</div>
<div>
<label class="block text-gray-600 mb-1 text-sm">订单总金额</label>
<div class="text-gray-800 font-medium text-green-600 text-lg">¥14,700.00</div>
</div>
</div>
<div class="mt-4 pt-4 border-t border-gray-200">
<div class="grid grid-cols-4 gap-4">
<div>
<label class="block text-gray-600 mb-1 text-sm">SKU总数</label>
<div class="text-gray-800 font-medium">3</div>
</div>
<div>
<label class="block text-gray-600 mb-1 text-sm">总数量</label>
<div class="text-gray-800 font-medium">300 箱</div>
</div>
<div>
<label class="block text-gray-600 mb-1 text-sm">平均单价</label>
<div class="text-gray-800 font-medium">¥49.00/箱</div>
</div>
<div>
<label class="block text-gray-600 mb-1 text-sm">期望送达日期</label>
<div class="text-gray-800 font-medium">2025-12-18</div>
</div>
</div>
</div>
</div>
<!-- SKU列表 -->
<div class="mb-6">
<h4 class="font-semibold text-lg text-gray-800 mb-4">订单商品列表</h4>
<div class="bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm">
<div class="overflow-x-auto">
<table class="w-full min-w-[800px]">
<thead>
<tr class="bg-gray-100 border-b border-gray-200">
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">SKU名称</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">物料号</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">规格</th>
<th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">数量</th>
<th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">单价</th>
<th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">小计</th>
<th class="px-4 py-3 text-center text-sm font-semibold text-gray-700">操作</th>
</tr>
</thead>
<tbody id="skuTableBody">
<!-- SKU行将通过JavaScript动态生成 -->
</tbody>
</table>
</div>
</div>
<!-- SKU详细信息展开区域 -->
<div id="skuDetailContainer" class="mt-4 space-y-4">
<!-- SKU详细信息将通过JavaScript动态生成，点击表格行展开 -->
</div>
</div>
</div>
</div>
</div>
<!-- 客诉页面 -->
<div id="complaintPage" class="hidden">
<div class="bg-white rounded-2xl shadow-lg p-8">
<!-- 面包屑导航 -->
<div class="mb-6">
<nav class="flex items-center space-x-2 text-sm">
<a href="#" id="breadcrumbOrders2" class="text-blue-600 hover:text-blue-800">我的订单</a>
<span class="text-gray-400">/</span>
<a href="#" id="breadcrumbOrderDetail" class="text-blue-600 hover:text-blue-800">订单详情</a>
<span class="text-gray-400">/</span>
<span class="text-gray-600">发起客诉</span>
</nav>
</div>
<h2 class="text-2xl font-bold text-blue-800 mb-6">发起客诉</h2>
<div class="max-w-3xl">
<div class="bg-gray-50 rounded-xl p-6 mb-6">
<h4 class="font-semibold text-lg text-gray-800 mb-4">订单信息</h4>
<div class="grid grid-cols-2 gap-4 text-sm">
<div>
<span class="text-gray-600">订单号:</span>
<span class="font-medium ml-2" id="complaintOrderNumber">ORD-20251118-001</span>
</div>
<div>
<span class="text-gray-600">产品名称:</span>
<span class="font-medium ml-2">饮料包装设计 #DRK-2023</span>
</div>
</div>
</div>
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">客诉类型</label>
<select class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3">
<option>产品质量问题</option>
<option>物流配送问题</option>
<option>服务态度问题</option>
<option>发票问题</option>
<option>其他问题</option>
</select>
</div>
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">客诉内容</label>
<textarea class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3" rows="8" placeholder="请详细描述您遇到的问题..."></textarea>
</div>
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">上传凭证（可选）</label>
<input type="file" class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-2" multiple accept="image/*"/>
<p class="text-gray-500 text-sm mt-2">支持上传多张图片，格式：JPG、PNG，单张不超过5MB</p>
</div>
<div class="flex justify-end space-x-3">
<button id="cancelComplaintBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-2 rounded-lg">取消</button>
<button class="bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg">提交客诉</button>
</div>
</div>
</div>
</div>
</section>
<!-- 财务信息 -->
<section class="tab-content" id="finance">
<div class="bg-white rounded-2xl shadow-lg p-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6">财务信息</h2>
<!-- 财务概览 -->
<div class="grid grid-cols-4 gap-6 mb-8">
<div class="bg-blue-50 rounded-xl p-6 border border-blue-200">
<div class="text-gray-600 mb-1">已下单金额</div>
<div class="text-xs text-gray-500 mb-2">本年度</div>
<div class="text-2xl font-bold text-blue-700">¥86,520.00</div>
</div>
<div class="bg-green-50 rounded-xl p-6 border border-green-200">
<div class="text-gray-600 mb-1">已返利金额</div>
<div class="text-xs text-gray-500 mb-2">本年度</div>
<div class="text-2xl font-bold text-green-700">¥3,450.00</div>
</div>
<div class="bg-yellow-50 rounded-xl p-6 border border-yellow-200">
<div class="text-gray-600 mb-1">即将到期的付款</div>
<div class="text-xs text-gray-500 mb-2">30天内到期</div>
<div class="text-2xl font-bold text-yellow-700">¥12,500.00</div>
</div>
<div class="bg-red-50 rounded-xl p-6 border border-red-200">
<div class="text-gray-600 mb-1">已经到期的付款</div>
<div class="text-xs text-gray-500 mb-2">已逾期</div>
<div class="text-2xl font-bold text-red-700">¥8,200.00</div>
</div>
</div>
<!-- 财务明细 -->
<div class="bg-gray-50 rounded-lg p-6">
  <div class="flex items-center justify-between">
    <h3 class="font-semibold text-lg text-gray-800 mb-0">财务明细</h3>
    <button class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg">
      导出报表
    </button>
  </div>
<div class="overflow-x-auto">
<table class="w-full">
<thead>
<tr class="bg-gray-100">
<th class="px-4 py-2 text-left">发票编号</th>
<th class="px-4 py-2 text-left">发票时间</th>
<th class="px-4 py-2 text-right">发票金额</th>
<th class="px-4 py-2 text-right">发票已付金额</th>
<th class="px-4 py-2 text-right">发票未付金额 (Outstanding)</th>
<th class="px-4 py-2 text-left">Due Date</th>
</tr>
</thead>
<tbody>
<tr class="border-b border-gray-200">
<td class="px-4 py-3 text-blue-600">INV-20251118-001</td>
<td class="px-4 py-3">2025-11-18</td>
<td class="px-4 py-3 text-right">¥4,900.00</td>
<td class="px-4 py-3 text-right text-green-600">¥4,900.00</td>
<td class="px-4 py-3 text-right">¥0.00</td>
<td class="px-4 py-3">2025-12-18</td>
</tr>
<tr class="border-b border-gray-200">
<td class="px-4 py-3 text-blue-600">INV-20251028-012</td>
<td class="px-4 py-3">2025-10-28</td>
<td class="px-4 py-3 text-right">¥12,500.00</td>
<td class="px-4 py-3 text-right text-green-600">¥12,500.00</td>
<td class="px-4 py-3 text-right">¥0.00</td>
<td class="px-4 py-3">2025-11-28</td>
</tr>
<tr class="border-b border-gray-200">
<td class="px-4 py-3 text-blue-600">INV-20251015-028</td>
<td class="px-4 py-3">2025-10-15</td>
<td class="px-4 py-3 text-right">¥8,200.00</td>
<td class="px-4 py-3 text-right">¥0.00</td>
<td class="px-4 py-3 text-right text-red-600">¥8,200.00</td>
<td class="px-4 py-3 text-red-600">2025-11-05</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<!-- 画稿管理 -->
<section class="tab-content" id="design-management">
<div class="bg-white rounded-2xl shadow-lg p-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6">画稿管理</h2>
<!-- 子模块导航 -->
<div class="flex border-b border-gray-200 mb-6">
<button class="submenu-tab-btn px-6 py-4 font-medium text-gray-600 hover:text-blue-700 border-b-2 border-blue-600 text-blue-700" data-section="upload-section">上传新画稿</button>
<button class="submenu-tab-btn px-6 py-4 font-medium text-gray-600 hover:text-blue-700" data-section="browse-section">查看已有画稿</button>
</div>
<!-- 上传新画稿模块 -->
<div class="submenu-section submenu-section-active" id="upload-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
<!-- 预览文件上传 -->
<div class="preview-upload-container border-2 border-dashed border-gray-300 rounded-xl p-8 flex flex-col items-center justify-center bg-gray-50 hover:bg-gray-100 transition cursor-pointer">
<span class="iconify text-4xl text-blue-700 mb-4" data-icon="mdi:image"></span>
<h3 class="text-lg font-medium mb-2">上传预览文件</h3>
<p class="text-gray-600 text-center mb-4">支持 JPG/PNG/PDF 格式<br/>用于AI解析和预览</p>
<input accept=".jpg,.jpeg,.png,.pdf" class="hidden" id="preview-file-input" type="file"/>
<button class="bg-blue-700 hover:bg-blue-800 text-white px-6 py-2 rounded-lg transition">
                  选择文件
                </button>
<div class="mt-4 w-full hidden" id="preview-container">
<img class="w-full h-32 object-contain rounded-lg border border-gray-200" id="preview-image"/>
<div class="mt-2 text-sm text-gray-600 flex items-center justify-between">
<span id="preview-filename">filename.jpg</span>
<span id="preview-size">2.5MB</span>
</div>
</div>
</div>
<!-- 原文件上传 -->
<div class="original-upload-container border-2 border-dashed border-gray-300 rounded-xl p-8 flex flex-col items-center justify-center bg-gray-50 hover:bg-gray-100 transition cursor-pointer">
<span class="iconify text-4xl text-orange-500 mb-4" data-icon="mdi:file"></span>
<h3 class="text-lg font-medium mb-2">上传原文件</h3>
<p class="text-gray-600 text-center mb-4">原始设计文件 (最大600MB)<br/>用于后续制作处理</p>
<input accept=".ai,.psd,.cdr" class="hidden" id="original-file-input" multiple="" type="file"/>
<button class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg transition">
                  选择文件
                </button>
<div class="mt-4 w-full hidden" id="original-info-container">
<div class="space-y-2 mb-4" id="original-files-list"></div>
<div class="text-xs text-gray-600">
<div class="flex justify-between">
<span>总文件数:</span>
<span id="original-file-count">0</span>
</div>
<div class="flex justify-between">
<span>总大小:</span>
<span id="original-total-size">0 Bytes</span>
</div>
</div>
</div>
</div>
</div>
<!-- AI解析结果 -->
<div class="bg-white border border-gray-200 rounded-xl overflow-hidden mb-8">
<div class="bg-blue-50 px-6 py-4 border-b border-gray-200 flex items-center">
<span class="iconify text-blue-700 mr-2" data-icon="mdi:artificial-intelligence"></span>
<h2 class="text-lg font-medium text-blue-700">AI解析结果</h2>
<div class="ml-auto">
<div class="flex items-center">
<div class="h-2 w-2 rounded-full bg-green-500 mr-2"></div>
<span class="text-sm text-green-700">分析完成</span>
</div>
</div>
</div>
<div class="p-6">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
<div>
<label class="block text-gray-700 mb-2">填充物类型</label>
<input class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" type="text" value="果汁"/>
</div>
<div>
<label class="block text-gray-700 mb-2">容量</label>
<input class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" type="text" value="200ml"/>
</div>
<div>
<label class="block text-gray-700 mb-2">是否打孔</label>
<select class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200">
<option>是</option>
<option selected="">否</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2">开启设备</label>
<input class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" type="text" value="旋盖"/>
</div>
<div>
<label class="block text-gray-700 mb-2">物理颜色目标</label>
<input class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" type="text" value="深蓝色"/>
</div>
</div>
<div class="border border-blue-100 bg-blue-50 rounded-lg p-4 mb-6">
<div class="flex items-start">
<span class="iconify text-blue-700 text-lg mt-1 mr-3" data-icon="mdi:lightbulb-on"></span>
<div>
<p class="text-blue-800 font-medium">AI分析判断：匹配到已有设计</p>
<p class="text-blue-700 mt-1">检测到相似度92%的设计版本：100s型号-V7</p>
<div class="mt-2 flex">
<button class="text-blue-700 font-medium underline flex items-center">
<span class="iconify mr-1" data-icon="mdi:link"></span>
                          查看匹配设计
                        </button>
</div>
</div>
</div>
</div>
<div class="space-y-4">
<h3 class="font-medium">您是否认可AI的分析？</h3>
<div class="flex space-x-4">
<label class="flex items-center">
<input class="text-blue-600 h-4 w-4" name="ai-accept" type="radio"/>
<span class="ml-2">是新设计</span>
</label>
<label class="flex items-center">
<input checked="" class="text-blue-600 h-4 w-4" name="ai-accept" type="radio"/>
<span class="ml-2">是已有设计</span>
</label>
<label class="flex items-center">
<input class="text-blue-600 h-4 w-4" name="ai-accept" type="radio"/>
<span class="ml-2">不确认</span>
</label>
</div>
<div class="mt-4">
<label class="block text-gray-700 mb-2">附加说明</label>
<textarea class="w-full border border-gray-300 rounded-lg px-4 py-2 h-24 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" placeholder="如有不确认的情况，请在此处补充说明..."></textarea>
</div>
</div>
<div class="mt-8">
<h3 class="font-medium mb-4">联系人信息</h3>
<div class="grid grid-cols-1 md:grid-rows-2 gap-6">
<div>
<label class="block text-gray-700 mb-2">联系邮箱</label>
<div class="relative">
<input class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" placeholder="请输入邮箱" type="email"/>
<select class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 focus:outline-none">
<option>历史邮箱</option>
<option>admin@lemei.com</option>
<option>design@lemei.com</option>
<option>contact@lemei.com</option>
</select>
</div>
</div>
<div>
<label class="block text-gray-700 mb-2">备用邮箱</label>
<input class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" placeholder="选填备用邮箱" type="email"/>
</div>
</div>
</div>
</div>
</div>
<div class="flex justify-end space-x-4">
<button class="border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition">
                取消
              </button>
<button class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg transition">
<span class="iconify mr-2" data-icon="mdi:check"></span>
                提交设计
              </button>
</div>
</div>
<!-- 查看已有画稿模块 -->
<div class="submenu-section" id="browse-section">
<h2 class="text-lg font-medium text-gray-800 mb-6">设计版本库</h2>
<div class="space-y-4">
<!-- 规格：果汁饮料 -->
<div class="border border-gray-200 rounded-lg">
<button class="spec-toggle w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center font-medium" data-spec="spec-1">
<span class="iconify text-gray-600 mr-2 transition-transform" data-icon="mdi:chevron-right"></span>
<span class="iconify text-orange-500 mr-2" data-icon="mdi:package"></span>
<span>规格：果汁饮料 (200ml)</span>
<span class="ml-auto text-sm text-gray-500">3个SKU</span>
</button>
<div class="spec-content hidden border-t border-gray-200 bg-gray-50" id="spec-1">
<!-- SKU 1 -->
<div class="border-b border-gray-200">
<button class="sku-toggle w-full text-left px-8 py-3 hover:bg-gray-100 flex items-center font-medium text-sm" data-sku="sku-1-1">
<span class="iconify text-gray-600 mr-2 transition-transform" data-icon="mdi:chevron-right"></span>
<span class="iconify text-blue-500 mr-2" data-icon="mdi:barcode"></span>
<span>SKU: JD-200-001 (无打孔版)</span>
<span class="ml-auto text-xs text-gray-500">2个版本</span>
</button>
<div class="sku-content hidden bg-white border-t border-gray-200" id="sku-1-1">
<div class="design-version-item px-12 py-4 border-b border-gray-200 hover:bg-blue-50 transition" data-sku="JD-200-001" data-version="v1">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center">
<span class="iconify text-green-500 mr-2" data-icon="mdi:file-check"></span>
<span class="text-sm font-medium">设计版本 V1 (当前版本)</span>
</div>
<span class="text-xs text-gray-500">2025-11-20</span>
</div>
<div class="design-preview-carousel flex items-center gap-3 overflow-x-auto pb-2 scroll-smooth" data-version-id="v1-jd200001">
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="1">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="2">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="3">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="4">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="5">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
</div>
</div>
<div class="design-version-item px-12 py-4 hover:bg-blue-50 transition" data-sku="JD-200-001" data-version="v0">
<div class="flex items-center justify-between mb-3">
<div class="flex items-center">
<span class="iconify text-gray-400 mr-2" data-icon="mdi:file-document"></span>
<span class="text-sm font-medium">设计版本 V0 (历史版本)</span>
</div>
<span class="text-xs text-gray-500">2025-11-15</span>
</div>
<div class="design-preview-carousel flex items-center gap-3 overflow-x-auto pb-2 scroll-smooth" data-version-id="v0-jd200001">
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="1">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="2">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="3">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="4">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
<div class="design-image flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition flex items-center justify-center" data-image="5">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- 画稿管理（新） -->
<section class="tab-content" id="design-management-new">
<div class="bg-white rounded-2xl shadow-lg p-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6">画稿管理（新）</h2>

<!-- 顶部说明 -->
<div class="border border-blue-100 bg-blue-50 rounded-xl p-5 text-blue-900 mb-8">
<div class="flex items-start">
<span class="iconify text-blue-700 text-xl mt-0.5 mr-3" data-icon="mdi:information-outline"></span>
<div>
<p class="font-medium mb-1">请选择您要进行的操作。</p>
<p class="text-sm text-blue-800">为方便客户使用，我们将常用操作放在这里，点击下方按钮即可快速进入相应流程。</p>
</div>
</div>
</div>

<!-- 主操作按钮区 -->
<div id="design-new-main-view">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<!-- 新画稿 -->
<button id="newArtworkBtn" type="button" class="group relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white px-6 py-6 text-left shadow-md hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
<div class="absolute inset-0 opacity-10 group-hover:opacity-20 transition-opacity bg-[radial-gradient(circle_at_top_left,_white,_transparent_60%)]"></div>
<div class="relative flex items-center">
<div class="mr-4 flex h-12 w-12 items-center justify-center rounded-full bg-white/10 border border-white/30">
<span class="iconify text-2xl" data-icon="mdi:plus-circle-outline"></span>
</div>
<div class="flex-1">
<div class="flex items-center mb-1">
<span class="text-lg font-semibold tracking-wide">新画稿</span>
<span class="ml-2 inline-flex items-center rounded-full bg-white/15 px-2 py-0.5 text-xs font-medium">推荐</span>
</div>
<p class="text-xs md:text-sm text-blue-50 leading-relaxed">
从空白或模板创建新的设计画稿，适用于新产品、新口味或新包装项目。
</p>
</div>
<span class="iconify text-2xl ml-4 opacity-70 group-hover:translate-x-0.5 transition-transform" data-icon="mdi:arrow-right-circle"></span>
</div>
</button>

<!-- 修改已有画稿 -->
<button id="editExistingArtworkBtn" type="button" class="group relative overflow-hidden rounded-2xl bg-white text-gray-900 px-6 py-6 text-left shadow-md hover:shadow-xl border border-gray-200 hover:border-blue-200 transform hover:-translate-y-0.5 transition-all duration-200">
<div class="absolute inset-0 opacity-0 group-hover:opacity-5 transition-opacity bg-gradient-to-r from-blue-500 to-green-500"></div>
<div class="relative flex items-center">
<div class="mr-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-50 border border-blue-100">
<span class="iconify text-2xl text-blue-600" data-icon="mdi:pencil-circle-outline"></span>
</div>
<div class="flex-1">
<div class="flex items-center mb-1">
<span class="text-lg font-semibold tracking-wide">修改已有画稿</span>
</div>
<p class="text-xs md:text-sm text-gray-600 leading-relaxed">
在已有设计基础上调整文字、颜色或细节，保留历史版本，适用于小改动或更新信息。
</p>
</div>
<span class="iconify text-2xl ml-4 text-blue-500 opacity-80 group-hover:translate-x-0.5 transition-transform" data-icon="mdi:arrow-right-circle-outline"></span>
</div>
</button>
</div>
</div>

<!-- 填写新画稿表单（点击「新画稿」后显示） -->
<div id="design-new-form-view" class="hidden">
<div class="flex items-center mb-6">
<button id="backToDesignNewMainBtn" type="button" class="flex items-center text-blue-600 hover:text-blue-800 font-medium mr-4 group">
<span class="iconify text-xl mr-2 group-hover:-translate-x-0.5 transition-transform" data-icon="mdi:arrow-left"></span>
返回
</button>
<span class="text-gray-400">|</span>
<h3 id="newArtworkFormTitle" class="ml-4 text-xl font-semibold text-gray-800">填写新画稿</h3>
</div>

<form id="newArtworkForm" class="space-y-6">
<input type="hidden" id="editingArtworkId" name="editingArtworkId" value="" />
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<!-- Design Code -->
<div>
<label class="block text-gray-700 font-medium mb-2">Design Code</label>
<div id="designCodeDisplay" class="flex items-center h-10 px-4 bg-gray-50 border border-gray-200 rounded-lg text-gray-500 text-sm">
<span class="iconify mr-2 text-blue-500" data-icon="mdi:information-outline"></span>
<span id="designCodeText">提交后系统将自动生成</span>
</div>
</div>

<!-- Paperboard -->
<div>
<label class="block text-gray-700 font-medium mb-2">Paperboard</label>
<select id="newArtworkPaperboard" name="paperboard" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="CB-Coated">CB-Coated</option>
<option value="CTB-Coated">CTB-Coated</option>
<option value="CCB-Coated">CCB-Coated</option>
<option value="FBB">FBB</option>
<option value="GC1">GC1</option>
<option value="GC2">GC2</option>
<option value="PE-Coated Board">PE-Coated Board</option>
<option value="Uncoated Kraft">Uncoated Kraft</option>
</select>
</div>

<!-- Artwork type -->
<div>
<label class="block text-gray-700 font-medium mb-2">Artwork type</label>
<select id="newArtworkType" name="artworkType" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="New">New - the SKU never printed by Lamipak before</option>
<option value="Existing">Existing - the SKU has been printed by Lamipak</option>
</select>
</div>

<!-- Color target -->
<div>
<label class="block text-gray-700 font-medium mb-2">Color target</label>
<select id="newArtworkColorTarget" name="colorTarget" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="No">No</option>
<option value="According to the digital artwork">According to the digital artwork</option>
</select>
</div>

<!-- Print Plant -->
<div>
<label class="block text-gray-700 font-medium mb-2">Print Plant</label>
<select id="newArtworkPrintPlant" name="printPlant" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="昆山工厂">昆山工厂</option>
<option value="印尼工厂">印尼工厂</option>
</select>
</div>

<!-- Product title -->
<div>
<label class="block text-gray-700 font-medium mb-2">Product title</label>
<input id="newArtworkProductTitle" name="productTitle" type="text" placeholder="例如：GUAVA TETRA FINAL 200ml" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200" />
</div>

<!-- Format -->
<div>
<label class="block text-gray-700 font-medium mb-2">Format</label>
<select id="newArtworkFormat" name="format" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="LRBA200S">LRBA200S</option>
<option value="LRBA1000B">LRBA1000B</option>
</select>
</div>

<!-- Opening -->
<div>
<label class="block text-gray-700 font-medium mb-2">Opening</label>
<select id="newArtworkOpening" name="opening" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="With Strawhole">With Strawhole</option>
<option value="Without strawhole">Without strawhole</option>
<option value="With screw cap">With screw cap</option>
<option value="With spout">With spout</option>
</select>
</div>

<!-- 纸张类型 logo -->
<div>
<label class="block text-gray-700 font-medium mb-2">纸张类型 logo</label>
<select id="newArtworkLogo" name="logo" class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 bg-white">
<option value="">请选择</option>
<option value="No FSC/PEFC logo">No FSC/PEFC logo</option>
<option value="FSC logo">FSC logo</option>
<option value="PEFC logo">PEFC logo</option>
</select>
</div>

<!-- Multiple Styles -->
<div class="md:col-span-2">
<label class="block text-gray-700 font-medium mb-2">Multiple Styles</label>
<div class="flex items-center gap-4">
<label class="inline-flex items-center cursor-pointer">
<input type="radio" name="multipleStyles" value="是" class="text-blue-600 h-4 w-4" />
<span class="ml-2">是</span>
</label>
<label class="inline-flex items-center cursor-pointer">
<input type="radio" name="multipleStyles" value="否" class="text-blue-600 h-4 w-4" checked />
<span class="ml-2">否</span>
</label>
</div>
</div>
</div>

<div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
<button type="button" id="cancelNewArtworkBtn" class="px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition">取消</button>
<button type="submit" id="newArtworkSubmitBtn" class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition flex items-center">
<span class="iconify mr-2" data-icon="mdi:check-circle"></span>
<span id="newArtworkSubmitBtnText">提交</span>
</button>
</div>
</form>
</div>

<!-- 我的画稿信息（表格列表） -->
<div id="design-new-list-view" class="hidden">
<div class="flex items-center mb-6">
<button id="backToDesignNewListBtn" type="button" class="flex items-center text-blue-600 hover:text-blue-800 font-medium mr-4 group">
<span class="iconify text-xl mr-2 group-hover:-translate-x-0.5 transition-transform" data-icon="mdi:arrow-left"></span>
返回
</button>
<span class="text-gray-400">|</span>
<h3 class="ml-4 text-xl font-semibold text-gray-800">我的画稿信息</h3>
</div>

<div class="overflow-x-auto rounded-xl border border-gray-200 shadow-sm">
<table class="w-full min-w-[800px]">
<thead>
<tr class="bg-gray-50 border-b border-gray-200">
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Design Code</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Paperboard</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Format</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Opening</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">FSC/PEFC logo</th>
<th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">状态</th>
<th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">操作</th>
</tr>
</thead>
<tbody id="designNewArtworkTableBody">
<!-- 由 JS 动态渲染 -->
</tbody>
</table>
</div>
<div id="designNewEmptyState" class="hidden py-16 text-center">
<span class="iconify text-6xl text-gray-300 mb-4 inline-block" data-icon="mdi:file-document-outline"></span>
<p class="text-gray-500 mb-2">暂无画稿信息</p>
<p class="text-sm text-gray-400">点击「新画稿」创建您的第一份画稿</p>
</div>
</div>
</div>
</section>

<!-- 联系乐美 - 聊天浮窗（可拖动、可缩放） -->
<div id="lemiChatWidget" class="fixed z-50 hidden rounded-2xl shadow-2xl border border-gray-200 flex flex-col bg-white overflow-hidden" style="left: calc(100vw - 408px); top: calc(100vh - 524px); width: 384px; height: 500px;">
<div id="lemiChatHeader" class="bg-blue-600 text-white px-4 py-3 flex items-center justify-between rounded-t-2xl cursor-grab active:cursor-grabbing select-none">
<div class="flex items-center pointer-events-none">
<span class="iconify text-xl mr-2" data-icon="mdi:chat"></span>
<span class="font-semibold">联系乐美</span>
</div>
<button id="closeLemiChatBtn" type="button" class="text-white/90 hover:text-white p-1 rounded hover:bg-white/20 transition pointer-events-auto">
<span class="iconify text-xl" data-icon="mdi:close"></span>
</button>
</div>
<div id="lemiChatMessages" class="flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 min-h-0">
<div class="flex justify-start">
<div class="bg-white rounded-lg rounded-tl-none px-3 py-2 shadow-sm max-w-[85%] text-sm text-gray-800">
您好！我是乐美客服，请问有什么可以帮您？
</div>
</div>
</div>
<div class="p-3 border-t border-gray-200 bg-white flex-shrink-0">
<div class="flex gap-2">
<input id="lemiChatInput" type="text" placeholder="输入消息..." class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-200" />
<button id="lemiChatSendBtn" type="button" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center">
<span class="iconify" data-icon="mdi:send"></span>
</button>
</div>
</div>
<div id="lemiChatResizeHandle" class="absolute bottom-0 right-0 w-5 h-5 cursor-se-resize flex items-end justify-end p-0.5 bg-gray-100 hover:bg-gray-200 rounded-tl transition" title="拖动调整大小">
<span class="iconify text-gray-500 text-sm" data-icon="mdi:resize-bottom-right"></span>
</div>
</div>
<button id="openLemiChatBtn" class="fixed bottom-6 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition hover:scale-105 hidden">
<span class="iconify text-2xl" data-icon="mdi:chat"></span>
</button>

<!-- 查看画稿设计图片 - 弹窗 -->
<div id="designImagesModal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/50 hidden">
<div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col">
<div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gray-50">
<h3 id="designImagesModalTitle" class="text-lg font-semibold text-gray-800">画稿设计图片</h3>
<button id="closeDesignImagesModalBtn" type="button" class="text-gray-500 hover:text-gray-700 p-1 rounded hover:bg-gray-200 transition">
<span class="iconify text-xl" data-icon="mdi:close"></span>
</button>
</div>
<div id="designImagesModalBody" class="flex-1 overflow-y-auto p-6">
<!-- 设计版本与图片轮播，由 JS 渲染 -->
</div>
</div>
</div>
</div>
<!-- 联系我们 -->
<section class="tab-content" id="contact">
<div class="bg-white rounded-2xl shadow-lg p-8">
<h2 class="text-2xl font-bold text-blue-800 mb-6">联系我们</h2>
<div class="grid grid-cols-2 gap-8">
<div>
<div class="mb-6">
<h3 class="text-xl font-semibold text-gray-800 mb-4">公司信息</h3>
<div class="space-y-3">
<div class="flex items-start">
<span class="iconify text-blue-600 mt-1 mr-3" data-icon="mdi:office-building"></span>
<div>
<div class="font-medium">乐美包装材料有限公司</div>
<div class="text-gray-600">昆山市新南西路369号</div>
</div>
</div>
<div class="flex items-center">
<span class="iconify text-blue-600 mr-3" data-icon="mdi:phone"></span>
<div class="text-gray-600">+86 21 8888 6666</div>
</div>
<div class="flex items-center">
<span class="iconify text-blue-600 mr-3" data-icon="mdi:email"></span>
<div class="text-gray-600">service@lemeipack.com</div>
</div>
<div class="flex items-center">
<span class="iconify text-blue-600 mr-3" data-icon="mdi:clock"></span>
<div class="text-gray-600">周一至周五 9:00-18:00 (GMT+8)</div>
</div>
</div>
</div>
<div>
<h3 class="text-xl font-semibold text-gray-800 mb-4">社交媒体</h3>
<div class="flex space-x-4">
<button class="text-blue-500 hover:text-blue-700">
<span class="iconify text-2xl" data-icon="mdi:wechat"></span>
</button>
<button class="text-blue-500 hover:text-blue-700">
<span class="iconify text-2xl" data-icon="mdi:linkedin"></span>
</button>
<button class="text-blue-500 hover:text-blue-700">
<span class="iconify text-2xl" data-icon="mdi:twitter"></span>
</button>
</div>
</div>
</div>
<div>
<h3 class="text-xl font-semibold text-gray-800 mb-4">在线留言</h3>
<form class="space-y-4">
<div>
<label class="block text-gray-700 mb-2">您的姓名</label>
<input class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3" type="text"/>
</div>
<div>
<label class="block text-gray-700 mb-2">公司名称</label>
<input class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3" type="text"/>
</div>
<div>
<label class="block text-gray-700 mb-2">电子邮箱</label>
<input class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3" type="email"/>
</div>
<div>
<label class="block text-gray-700 mb-2">咨询类型</label>
<select class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3">
<option>产品咨询</option>
<option>技术支持</option>
<option>合作建议</option>
<option>其他</option>
</select>
</div>
<div>
<label class="block text-gray-700 mb-2">消息内容</label>
<textarea class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3" rows="4"></textarea>
</div>
<button class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold" type="submit">
                提交留言
              </button>
</form>
</div>
</div>
</div>
</section>
<!-- 购物车 -->
<section class="tab-content" id="cart">
<div class="bg-white rounded-2xl shadow-lg p-8">
<div class="flex justify-between items-center mb-6">
<h2 class="text-2xl font-bold text-blue-800">购物车</h2>
<div class="flex items-center space-x-4">
<div class="text-gray-600">
共 <span id="cartTotalItems" class="font-semibold text-blue-600">0</span> 件商品
</div>
<div class="text-lg font-bold text-green-600">
总计: ¥<span id="cartTotalPrice">0.00</span>
</div>
</div>
</div>
<div id="cartContainer" class="space-y-6">
<!-- 购物车商品将按规格分类显示在这里 -->
<div class="text-center py-12 text-gray-500">
购物车是空的，快去添加商品吧！
</div>
</div>
<div id="cartActions" class="hidden mt-8 flex justify-end space-x-4">
<button class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-3 rounded-lg font-semibold">
清空购物车
</button>
<button class="bg-green-600 hover:bg-green-500 text-white px-8 py-3 rounded-lg font-semibold">
去结算
</button>
</div>
</div>
</section>
</main>

<!-- 页脚 -->
<footer class="mt-16 bg-slate-800 text-slate-200">
<div class="container mx-auto px-4 py-12 max-w-6xl">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10">
<!-- 品牌与简介 -->
<div class="lg:col-span-1">
<div class="flex items-center mb-4">
<span class="iconify text-2xl text-blue-400" data-icon="mdi:package-variant"></span>
<span class="ml-2 font-bold text-white text-lg">乐美包装</span>
</div>
<p class="text-slate-400 text-sm leading-relaxed">
客户自助下单平台 · 在线配置订单、管理画稿、追踪物流，一站式包装采购体验。
</p>
</div>
<!-- 快捷入口 -->
<div>
<h4 class="font-semibold text-white mb-4 text-sm uppercase tracking-wider">快捷入口</h4>
<ul class="space-y-2.5">
<li><button class="tab-btn-footer text-slate-400 hover:text-white transition text-sm" data-tab="home">首页</button></li>
<li><button class="tab-btn-footer text-slate-400 hover:text-white transition text-sm" data-tab="configurator">订单配置</button></li>
<li><button class="tab-btn-footer text-slate-400 hover:text-white transition text-sm" data-tab="orders">我的订单</button></li>
<li><button class="tab-btn-footer text-slate-400 hover:text-white transition text-sm" data-tab="design-management-new">画稿管理</button></li>
<li><button class="tab-btn-footer text-slate-400 hover:text-white transition text-sm" data-tab="contact">联系我们</button></li>
</ul>
</div>
<!-- 联系方式 -->
<div>
<h4 class="font-semibold text-white mb-4 text-sm uppercase tracking-wider">联系方式</h4>
<ul class="space-y-3">
<li class="flex items-start text-sm">
<span class="iconify text-blue-400 mr-2 mt-0.5 flex-shrink-0" data-icon="mdi:map-marker"></span>
<span class="text-slate-400">昆山市新南西路369号</span>
</li>
<li class="flex items-center text-sm">
<span class="iconify text-blue-400 mr-2 flex-shrink-0" data-icon="mdi:phone"></span>
<a href="tel:+862188886666" class="text-slate-400 hover:text-white transition">+86 21 8888 6666</a>
</li>
<li class="flex items-center text-sm">
<span class="iconify text-blue-400 mr-2 flex-shrink-0" data-icon="mdi:email"></span>
<a href="mailto:service@lemeipack.com" class="text-slate-400 hover:text-white transition">service@lemeipack.com</a>
</li>
<li class="flex items-center text-sm">
<span class="iconify text-blue-400 mr-2 flex-shrink-0" data-icon="mdi:clock-outline"></span>
<span class="text-slate-400">周一至周五 9:00-18:00 (GMT+8)</span>
</li>
</ul>
</div>
<!-- 服务说明 -->
<div>
<h4 class="font-semibold text-white mb-4 text-sm uppercase tracking-wider">平台服务</h4>
<ul class="space-y-2.5 text-sm text-slate-400">
<li>· 在线选品与配置</li>
<li>· 画稿上传与管理</li>
<li>· 订单跟踪与对账</li>
<li>· 7×24 自助查询</li>
</ul>
</div>
</div>
<div class="mt-12 pt-8 border-t border-slate-700 flex flex-col sm:flex-row items-center justify-between gap-4">
<p class="text-slate-500 text-sm">© 2025 乐美包装材料有限公司 · 客户自助下单平台</p>
<div class="flex items-center gap-6 text-sm">
<a href="#" class="text-slate-500 hover:text-slate-300 transition">使用条款</a>
<a href="#" class="text-slate-500 hover:text-slate-300 transition">隐私政策</a>
</div>
</div>
</div>
</footer>

<!-- 公司信息详情模态框 -->
<div id="companyInfoModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
<div class="bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto mx-auto">
<!-- 模态框头部 -->
<div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl">
<h2 class="text-xl font-bold text-gray-800">公司详细信息</h2>
<button id="closeCompanyInfoModal" class="text-gray-400 hover:text-gray-600 transition">
<span class="iconify text-2xl" data-icon="mdi:close"></span>
</button>
</div>
<!-- 模态框内容 -->
<div class="p-6">
<!-- 公司名称（可编辑） -->
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">公司名称 <span class="text-red-500">*</span></label>
<div class="flex items-center gap-3">
<input type="text" id="companyNameInput" disabled class="flex-1 border border-gray-300 rounded-lg px-4 py-2 bg-gray-50 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 focus:bg-white disabled:bg-gray-50 disabled:cursor-not-allowed" value="章三包装有限公司"/>
<button id="editCompanyNameBtn" class="text-blue-600 hover:text-blue-800 font-medium flex items-center whitespace-nowrap">
<span class="iconify mr-1" data-icon="mdi:pencil"></span>修改
</button>
</div>
<div id="companyNameEditActions" class="hidden mt-2 flex gap-2">
<button id="saveCompanyNameBtn" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition">保存</button>
<button id="cancelCompanyNameBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition">取消</button>
</div>
</div>
<!-- 税号 -->
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">税号</label>
<div class="text-gray-800 bg-gray-50 rounded-lg px-4 py-2">91320583MA1N2P3Q4R</div>
</div>
<!-- 乐美销售负责人 -->
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">乐美销售负责人</label>
<div class="text-gray-800 bg-gray-50 rounded-lg px-4 py-2">张经理 (电话: 138-0000-0000)</div>
</div>
<!-- 收货地址 -->
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">收货地址</label>
<div class="text-gray-800 bg-gray-50 rounded-lg px-4 py-2">昆山市新南西路369号</div>
</div>
<!-- 联系人信息 -->
<div class="mb-6">
<label class="block text-gray-700 mb-2 font-medium">联系人信息</label>
<div class="bg-gray-50 rounded-lg p-4 space-y-3">
<div class="flex items-center flex-wrap">
<span class="iconify text-blue-600 mr-2 text-lg" data-icon="mdi:account"></span>
<span class="text-gray-700 font-medium mr-4 min-w-[100px]">联系人姓名:</span>
<span class="text-gray-800">章三</span>
</div>
<div class="flex items-center flex-wrap">
<span class="iconify text-blue-600 mr-2 text-lg" data-icon="mdi:phone"></span>
<span class="text-gray-700 font-medium mr-4 min-w-[100px]">联系电话:</span>
<a href="tel:138-0000-0000" class="text-blue-600 hover:text-blue-800 hover:underline">138-0000-0000</a>
</div>
<div class="flex items-center flex-wrap">
<span class="iconify text-blue-600 mr-2 text-lg" data-icon="mdi:email"></span>
<span class="text-gray-700 font-medium mr-4 min-w-[100px]">联系邮箱:</span>
<a href="mailto:zhangsan@example.com" class="text-blue-600 hover:text-blue-800 hover:underline break-all">zhangsan@example.com</a>
</div>
</div>
</div>
</div>
<!-- 模态框底部 -->
<div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3 rounded-b-2xl">
<button id="closeCompanyInfoModalBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium">关闭</button>
</div>
</div>
</div>
<script>
    // ==================== 多语言翻译系统 ====================
    // 翻译数据对象
    const translations = {
      zh: {
        // 导航栏
        'nav.home': '首页',
        'nav.configurator': '订单配置',
        'nav.orders': '我的订单',
        'nav.finance': '财务信息',
        'nav.design-management': '画稿管理',
        'nav.design-management-new': '画稿管理（新）',
        'nav.contact': '联系我们',
        'nav.cart': '购物车',
        'nav.search-placeholder': '搜索产品...',
        'nav.image-search': '图片搜索',
        'nav.image-search-title': '图片搜索',
        'nav.paste-image': '粘贴图片或拖拽图片到这里',
        'nav.image-formats': '支持 JPG、PNG 格式',
        'nav.search-similar': '搜索相似图片',
        'nav.clear': '清除',
        
        // 首页
        'home.company-intro': '公司介绍',
        'home.company-desc1': '乐美包装是领先的包装材料解决方案提供商，专注于为食品饮料、电子产品等行业提供高质量包装产品。拥有超过10年行业经验，服务全球500+企业客户。',
        'home.company-desc2': '我们提供纸箱、泡沫、胶带等全品类包装材料，支持定制化设计和批量生产，满足不同行业的包装需求。',
        'home.learn-more': '了解更多',
        'home.free-sample': '免费样品',
        'home.hot-products': '热销产品',
        'home.view-details': '详情',
        'home.add-to-cart': '加入购物车',
        
        // 订单配置
        'config.title': '订单配置工具',
        'config.step1': '选择配置与设计',
        'config.step2': '下单',
        'config.filter-title': '筛选条件',
        'config.filter-format': '规格选择 (Format)',
        'config.filter-all-format': '全部规格',
        'config.filter-machine': '灌装机型号',
        'config.filter-all-machine': '全部型号',
        'config.filter-filling': '填充物类型',
        'config.filter-all-filling': '全部类型',
        'config.filter-material': '材料结构',
        'config.filter-all-material': '全部材料',
        'config.filter-product-group': '产品组',
        'config.filter-all-product-group': '全部产品组',
        'config.filter-series': '系列',
        'config.filter-all-series': '全部系列',
        'config.filter-certification': '认证要求',
        'config.search-placeholder': '搜索设计描述/产品代码...',
        'config.select-design': '选择此设计',
        'config.next': '下一步',
        'config.prev': '上一步',
        'config.product-info': '产品信息',
        'config.product-name': '产品名称:',
        'config.material-number': '物料号:',
        'config.format': '规格:',
        'config.material': '材料结构:',
        'config.purchase-info': '采购信息',
        'config.quantity': '数量',
        'config.unit': '(单位: 箱)',
        'config.delivery-date': '期望送达日期',
        'config.special-requirements': '特殊要求',
        'config.confirm-order': '确认下单',
        
        // 订单列表
        'orders.title': '我的订单',
        'orders.search-placeholder': '搜索订单号...',
        'orders.all-status': '全部状态',
        'orders.pending-review': '待审核',
        'orders.pending-confirm': '待客户确认',
        'orders.confirmed': '已确认',
        'orders.completed': '已完成',
        'orders.order-number': '订单号',
        'orders.date': '日期',
        'orders.product': '产品',
        'orders.quantity': '数量',
        'orders.amount': '金额',
        'orders.status': '状态',
        'orders.action': '操作',
        'orders.view': '查看',
        'orders.showing': '显示',
        'orders.total': '共',
        'orders.items': '条',
        'orders.prev-page': '上一页',
        'orders.next-page': '下一页',
        
        // 订单详情
        'order-detail.title': '订单详情',
        'order-detail.back': '返回订单列表',
        'order-detail.status-flow': '订单状态流程',
        'order-detail.ordered': '已下单',
        'order-detail.pending-review': '待审核',
        'order-detail.current-status': '当前状态',
        'order-detail.pending-confirm': '待客户确认',
        'order-detail.confirmed': '已确认',
        'order-detail.completed': '已完成',
        'order-detail.actions': '订单操作',
        'order-detail.repurchase': '一键复购',
        'order-detail.logistics': '查看订单物流信息',
        'order-detail.modify': '发起修改申请',
        'order-detail.complaint': '发起客诉',
        'order-detail.export-order': '导出订单信息',
        'order-detail.export-invoice': '导出发票信息',
        'order-detail.basic-info': '订单基本信息',
        'order-detail.order-number': '订单号',
        'order-detail.order-time': '下单时间',
        'order-detail.order-status': '订单状态',
        'order-detail.total-amount': '订单总金额',
        'order-detail.sku-count': 'SKU总数',
        'order-detail.total-quantity': '总数量',
        'order-detail.avg-price': '平均单价',
        'order-detail.delivery-date': '期望送达日期',
        'order-detail.product-list': '订单商品列表',
        'order-detail.sku-name': 'SKU名称',
        'order-detail.material-number': '物料号',
        'order-detail.format': '规格',
        'order-detail.unit-price': '单价',
        'order-detail.subtotal': '小计',
        'order-detail.view-details': '查看详情',
        'order-detail.hide-details': '隐藏详情',
        'order-detail.product-spec': '产品规格',
        'order-detail.product-params': '产品参数',
        'order-detail.machine-model': '灌装机型号',
        'order-detail.filling-type': '填充物类型',
        'order-detail.paper-requirement': '原纸要求',
        'order-detail.certification': '认证要求',
        
        // 客诉
        'complaint.title': '发起客诉',
        'complaint.order-info': '订单信息',
        'complaint.order-number': '订单号:',
        'complaint.product-name': '产品名称:',
        'complaint.type': '客诉类型',
        'complaint.content': '客诉内容',
        'complaint.upload': '上传凭证（可选）',
        'complaint.upload-desc': '支持上传多张图片，格式：JPG、PNG，单张不超过5MB',
        'complaint.cancel': '取消',
        'complaint.submit': '提交客诉',
        
        // 财务信息
        'finance.title': '财务信息',
        'finance.ordered-amount': '已下单金额',
        'finance.this-year': '本年度',
        'finance.rebate-amount': '已返利金额',
        'finance.due-soon': '即将到期的付款',
        'finance.days': '30天内到期',
        'finance.overdue': '已经到期的付款',
        'finance.overdue-desc': '已逾期',
        'finance.details': '财务明细',
        'finance.export': '导出报表',
        'finance.invoice-number': '发票编号',
        'finance.invoice-time': '发票时间',
        'finance.invoice-amount': '发票金额',
        'finance.paid-amount': '发票已付金额',
        'finance.unpaid-amount': '发票未付金额 (Outstanding)',
        'finance.due-date': 'Due Date',
        
        // 画稿管理
        'design.title': '画稿管理',
        'design.upload': '上传新画稿',
        'design.browse': '查看已有画稿',
        'design.upload-preview': '上传预览文件',
        'design.upload-preview-desc': '支持 JPG/PNG/PDF 格式<br/>用于AI解析和预览',
        'design.select-file': '选择文件',
        'design.upload-original': '上传原文件',
        'design.upload-original-desc': '原始设计文件 (最大600MB)<br/>用于后续制作处理',
        'design.ai-result': 'AI解析结果',
        'design.ai-completed': '分析完成',
        'design.filling-type': '填充物类型',
        'design.capacity': '容量',
        'design.punched': '是否打孔',
        'design.yes': '是',
        'design.no': '否',
        'design.opening-device': '开启设备',
        'design.color-target': '物理颜色目标',
        'design.ai-match': 'AI分析判断：匹配到已有设计',
        'design.ai-similarity': '检测到相似度92%的设计版本：100s型号-V7',
        'design.view-match': '查看匹配设计',
        'design.ai-accept': '您是否认可AI的分析？',
        'design.new-design': '是新设计',
        'design.existing-design': '是已有设计',
        'design.not-sure': '不确认',
        'design.additional-notes': '附加说明',
        'design.contact-info': '联系人信息',
        'design.email': '联系邮箱',
        'design.backup-email': '备用邮箱',
        'design.backup-email-placeholder': '选填备用邮箱',
        'design.cancel': '取消',
        'design.submit': '提交设计',
        'design.version-library': '设计版本库',
        'design.spec': '规格：',
        'design.skus': '个SKU',
        'design.versions': '个版本',
        'design.current-version': '设计版本',
        'design.history-version': '设计版本',
        'design.current': '(当前版本)',
        'design.history': '(历史版本)',
        
        // 联系我们
        'contact.title': '联系我们',
        'contact.company-info': '公司信息',
        'contact.social-media': '社交媒体',
        'contact.message': '在线留言',
        'contact.your-name': '您的姓名',
        'contact.company-name': '公司名称',
        'contact.email': '电子邮箱',
        'contact.inquiry-type': '咨询类型',
        'contact.product-inquiry': '产品咨询',
        'contact.technical-support': '技术支持',
        'contact.cooperation': '合作建议',
        'contact.other': '其他',
        'contact.message-content': '消息内容',
        'contact.submit': '提交留言',
        
        // 购物车
        'cart.title': '购物车',
        'cart.total-items': '共',
        'cart.items': '件商品',
        'cart.total': '总计:',
        'cart.empty': '购物车是空的，快去添加商品吧！',
        'cart.clear': '清空购物车',
        'cart.checkout': '去结算',
        
        // 公司信息
        'company.title': '公司详细信息',
        'company.name': '公司名称',
        'company.tax-number': '税号',
        'company.sales-manager': '乐美销售负责人',
        'company.delivery-address': '收货地址',
        'company.contact-info': '联系人信息',
        'company.contact-name': '联系人姓名:',
        'company.contact-phone': '联系电话:',
        'company.contact-email': '联系邮箱:',
        'company.edit': '修改',
        'company.save': '保存',
        'company.cancel': '取消',
        'company.close': '关闭',
        'company.name-required': '公司名称不能为空',
        'company.save-success': '公司名称修改成功！',
        
        // 通用
        'common.loading': '加载中...',
        'common.confirm': '确认',
        'common.delete': '删除',
        'common.edit': '编辑',
        'common.save': '保存',
        'common.cancel': '取消',
        'common.close': '关闭',
        'common.submit': '提交',
        'common.search': '搜索',
        'common.view': '查看',
        'common.delete-confirm': '确定要删除这个商品吗？',
        'common.clear-cart-confirm': '确定要清空购物车吗？',
        'common.added-to-cart': '商品已成功加入购物车！',
        'common.select-design-first': '请先选择商品设计',
        'common.no-products': '没有找到符合条件的产品',
        'common.spec': '规格:',
        'common.products': '个产品',
        'common.items': '个商品',
      },
      en: {
        // Navigation
        'nav.home': 'Home',
        'nav.configurator': 'Order Configurator',
        'nav.orders': 'My Orders',
        'nav.finance': 'Finance',
        'nav.design-management': 'Design Management',
        'nav.design-management-new': 'Design Management (New)',
        'nav.contact': 'Contact Us',
        'nav.cart': 'Shopping Cart',
        'nav.search-placeholder': 'Search products...',
        'nav.image-search': 'Image Search',
        'nav.image-search-title': 'Image Search',
        'nav.paste-image': 'Paste or drag image here',
        'nav.image-formats': 'Supports JPG, PNG formats',
        'nav.search-similar': 'Search Similar Images',
        'nav.clear': 'Clear',
        
        // Home
        'home.company-intro': 'Company Introduction',
        'home.company-desc1': 'LemiPack is a leading packaging materials solution provider, focusing on providing high-quality packaging products for food & beverage, electronics and other industries. With over 10 years of industry experience, serving 500+ corporate customers worldwide.',
        'home.company-desc2': 'We provide full range of packaging materials including cartons, foam, tape, etc., supporting customized design and mass production to meet packaging needs of different industries.',
        'home.learn-more': 'Learn More',
        'home.free-sample': 'Free Sample',
        'home.hot-products': 'Hot Products',
        'home.view-details': 'Details',
        'home.add-to-cart': 'Add to Cart',
        
        // Order Configurator
        'config.title': 'Order Configurator',
        'config.step1': 'Select Configuration & Design',
        'config.step2': 'Place Order',
        'config.filter-title': 'Filters',
        'config.filter-format': 'Format Selection',
        'config.filter-all-format': 'All Formats',
        'config.filter-machine': 'Filling Machine Model',
        'config.filter-all-machine': 'All Models',
        'config.filter-filling': 'Filling Type',
        'config.filter-all-filling': 'All Types',
        'config.filter-material': 'Material Structure',
        'config.filter-all-material': 'All Materials',
        'config.filter-product-group': 'Product Group',
        'config.filter-all-product-group': 'All Product Groups',
        'config.filter-series': 'Series',
        'config.filter-all-series': 'All Series',
        'config.filter-certification': 'Certification Requirements',
        'config.search-placeholder': 'Search design description/product code...',
        'config.select-design': 'Select This Design',
        'config.next': 'Next',
        'config.prev': 'Previous',
        'config.product-info': 'Product Information',
        'config.product-name': 'Product Name:',
        'config.material-number': 'Material Number:',
        'config.format': 'Format:',
        'config.material': 'Material Structure:',
        'config.purchase-info': 'Purchase Information',
        'config.quantity': 'Quantity',
        'config.unit': '(Unit: Case)',
        'config.delivery-date': 'Expected Delivery Date',
        'config.special-requirements': 'Special Requirements',
        'config.confirm-order': 'Confirm Order',
        
        // Orders
        'orders.title': 'My Orders',
        'orders.search-placeholder': 'Search order number...',
        'orders.all-status': 'All Status',
        'orders.pending-review': 'Pending Review',
        'orders.pending-confirm': 'Pending Customer Confirmation',
        'orders.confirmed': 'Confirmed',
        'orders.completed': 'Completed',
        'orders.order-number': 'Order Number',
        'orders.date': 'Date',
        'orders.product': 'Product',
        'orders.quantity': 'Quantity',
        'orders.amount': 'Amount',
        'orders.status': 'Status',
        'orders.action': 'Action',
        'orders.view': 'View',
        'orders.showing': 'Showing',
        'orders.total': 'Total',
        'orders.items': 'items',
        'orders.prev-page': 'Previous',
        'orders.next-page': 'Next',
        
        // Order Detail
        'order-detail.title': 'Order Details',
        'order-detail.back': 'Back to Order List',
        'order-detail.status-flow': 'Order Status Flow',
        'order-detail.ordered': 'Ordered',
        'order-detail.pending-review': 'Pending Review',
        'order-detail.current-status': 'Current Status',
        'order-detail.pending-confirm': 'Pending Customer Confirmation',
        'order-detail.confirmed': 'Confirmed',
        'order-detail.completed': 'Completed',
        'order-detail.actions': 'Order Actions',
        'order-detail.repurchase': 'One-Click Repurchase',
        'order-detail.logistics': 'View Logistics',
        'order-detail.modify': 'Request Modification',
        'order-detail.complaint': 'File Complaint',
        'order-detail.export-order': 'Export Order Info',
        'order-detail.export-invoice': 'Export Invoice',
        'order-detail.basic-info': 'Basic Order Information',
        'order-detail.order-number': 'Order Number',
        'order-detail.order-time': 'Order Time',
        'order-detail.order-status': 'Order Status',
        'order-detail.total-amount': 'Total Amount',
        'order-detail.sku-count': 'Total SKUs',
        'order-detail.total-quantity': 'Total Quantity',
        'order-detail.avg-price': 'Average Unit Price',
        'order-detail.delivery-date': 'Expected Delivery Date',
        'order-detail.product-list': 'Order Product List',
        'order-detail.sku-name': 'SKU Name',
        'order-detail.material-number': 'Material Number',
        'order-detail.format': 'Format',
        'order-detail.unit-price': 'Unit Price',
        'order-detail.subtotal': 'Subtotal',
        'order-detail.view-details': 'View Details',
        'order-detail.hide-details': 'Hide Details',
        'order-detail.product-spec': 'Product Specifications',
        'order-detail.product-params': 'Product Parameters',
        'order-detail.machine-model': 'Filling Machine Model',
        'order-detail.filling-type': 'Filling Type',
        'order-detail.paper-requirement': 'Paper Requirement',
        'order-detail.certification': 'Certification Requirements',
        
        // Complaint
        'complaint.title': 'File Complaint',
        'complaint.order-info': 'Order Information',
        'complaint.order-number': 'Order Number:',
        'complaint.product-name': 'Product Name:',
        'complaint.type': 'Complaint Type',
        'complaint.content': 'Complaint Content',
        'complaint.upload': 'Upload Evidence (Optional)',
        'complaint.upload-desc': 'Supports multiple images, formats: JPG, PNG, max 5MB per image',
        'complaint.cancel': 'Cancel',
        'complaint.submit': 'Submit Complaint',
        
        // Finance
        'finance.title': 'Finance Information',
        'finance.ordered-amount': 'Ordered Amount',
        'finance.this-year': 'This Year',
        'finance.rebate-amount': 'Rebate Amount',
        'finance.due-soon': 'Payment Due Soon',
        'finance.days': 'Due in 30 days',
        'finance.overdue': 'Overdue Payment',
        'finance.overdue-desc': 'Overdue',
        'finance.details': 'Finance Details',
        'finance.export': 'Export Report',
        'finance.invoice-number': 'Invoice Number',
        'finance.invoice-time': 'Invoice Time',
        'finance.invoice-amount': 'Invoice Amount',
        'finance.paid-amount': 'Paid Amount',
        'finance.unpaid-amount': 'Unpaid Amount (Outstanding)',
        'finance.due-date': 'Due Date',
        
        // Design Management
        'design.title': 'Design Management',
        'design.upload': 'Upload New Design',
        'design.browse': 'Browse Existing Designs',
        'design.upload-preview': 'Upload Preview File',
        'design.upload-preview-desc': 'Supports JPG/PNG/PDF formats<br/>For AI parsing and preview',
        'design.select-file': 'Select File',
        'design.upload-original': 'Upload Original File',
        'design.upload-original-desc': 'Original design file (max 600MB)<br/>For production processing',
        'design.ai-result': 'AI Analysis Result',
        'design.ai-completed': 'Analysis Completed',
        'design.filling-type': 'Filling Type',
        'design.capacity': 'Capacity',
        'design.punched': 'Punched',
        'design.yes': 'Yes',
        'design.no': 'No',
        'design.opening-device': 'Opening Device',
        'design.color-target': 'Physical Color Target',
        'design.ai-match': 'AI Analysis: Matched existing design',
        'design.ai-similarity': 'Detected 92% similar design version: 100s model-V7',
        'design.view-match': 'View Matched Design',
        'design.ai-accept': 'Do you accept AI analysis?',
        'design.new-design': 'New Design',
        'design.existing-design': 'Existing Design',
        'design.not-sure': 'Not Sure',
        'design.additional-notes': 'Additional Notes',
        'design.contact-info': 'Contact Information',
        'design.email': 'Contact Email',
        'design.backup-email': 'Backup Email',
        'design.backup-email-placeholder': 'Optional backup email',
        'design.cancel': 'Cancel',
        'design.submit': 'Submit Design',
        'design.version-library': 'Design Version Library',
        'design.spec': 'Specification:',
        'design.skus': 'SKUs',
        'design.versions': 'versions',
        'design.current-version': 'Design Version',
        'design.history-version': 'Design Version',
        'design.current': '(Current Version)',
        'design.history': '(History Version)',
        
        // Contact
        'contact.title': 'Contact Us',
        'contact.company-info': 'Company Information',
        'contact.social-media': 'Social Media',
        'contact.message': 'Online Message',
        'contact.your-name': 'Your Name',
        'contact.company-name': 'Company Name',
        'contact.email': 'Email',
        'contact.inquiry-type': 'Inquiry Type',
        'contact.product-inquiry': 'Product Inquiry',
        'contact.technical-support': 'Technical Support',
        'contact.cooperation': 'Cooperation Proposal',
        'contact.other': 'Other',
        'contact.message-content': 'Message Content',
        'contact.submit': 'Submit Message',
        
        // Shopping Cart
        'cart.title': 'Shopping Cart',
        'cart.total-items': 'Total',
        'cart.items': 'items',
        'cart.total': 'Total:',
        'cart.empty': 'Your cart is empty, go add some products!',
        'cart.clear': 'Clear Cart',
        'cart.checkout': 'Checkout',
        
        // Company Info
        'company.title': 'Company Details',
        'company.name': 'Company Name',
        'company.tax-number': 'Tax Number',
        'company.sales-manager': 'LemiPack Sales Manager',
        'company.delivery-address': 'Delivery Address',
        'company.contact-info': 'Contact Information',
        'company.contact-name': 'Contact Name:',
        'company.contact-phone': 'Contact Phone:',
        'company.contact-email': 'Contact Email:',
        'company.edit': 'Edit',
        'company.save': 'Save',
        'company.cancel': 'Cancel',
        'company.close': 'Close',
        'company.name-required': 'Company name cannot be empty',
        'company.save-success': 'Company name updated successfully!',
        
        // Common
        'common.loading': 'Loading...',
        'common.confirm': 'Confirm',
        'common.delete': 'Delete',
        'common.edit': 'Edit',
        'common.save': 'Save',
        'common.cancel': 'Cancel',
        'common.close': 'Close',
        'common.submit': 'Submit',
        'common.search': 'Search',
        'common.view': 'View',
        'common.delete-confirm': 'Are you sure you want to delete this item?',
        'common.clear-cart-confirm': 'Are you sure you want to clear the cart?',
        'common.added-to-cart': 'Item added to cart successfully!',
        'common.select-design-first': 'Please select a product design first',
        'common.no-products': 'No products found matching your criteria',
        'common.spec': 'Specification:',
        'common.products': 'products',
        'common.items': 'items',
      }
    };
    
    // 当前语言，默认中文
    let currentLanguage = localStorage.getItem('language') || 'zh';
    
    // 翻译函数
    function t(key) {
      return translations[currentLanguage][key] || translations['zh'][key] || key;
    }
    
    // 更新页面翻译
    function updateTranslations() {
      // 更新所有带有data-i18n属性的元素
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = t(key);
        
        // 如果是input的placeholder
        if (element.tagName === 'INPUT' && element.type !== 'submit' && element.type !== 'button') {
          element.placeholder = translation;
        }
        // 如果是span或其他内联元素，直接更新文本
        else if (element.tagName === 'SPAN' || element.tagName === 'DIV' || element.tagName === 'P' || element.tagName === 'H1' || element.tagName === 'H2' || element.tagName === 'H3' || element.tagName === 'H4' || element.tagName === 'H5' || element.tagName === 'H6' || element.tagName === 'LABEL') {
          // 如果有子元素是图标，保留图标
          const icons = element.querySelectorAll('.iconify');
          if (icons.length > 0) {
            // 找到所有文本节点
            const textNodes = Array.from(element.childNodes).filter(node => 
              node.nodeType === Node.TEXT_NODE && node.textContent.trim()
            );
            // 更新第一个文本节点
            if (textNodes.length > 0) {
              textNodes[0].textContent = ' ' + translation;
            } else {
              // 如果没有文本节点，在最后一个图标后添加
              const lastIcon = icons[icons.length - 1];
              lastIcon.after(' ' + translation);
            }
          } else {
            element.textContent = translation;
          }
        }
        // 如果是button或submit类型的input
        else if (element.tagName === 'BUTTON' || element.type === 'submit' || element.type === 'button') {
          // 保留图标，只更新文字
          const icons = element.querySelectorAll('.iconify');
          if (icons.length > 0) {
            // 有图标的情况，找到所有文本节点并更新
            const textNodes = Array.from(element.childNodes).filter(node => 
              node.nodeType === Node.TEXT_NODE
            );
            // 移除所有文本节点
            textNodes.forEach(node => node.remove());
            // 在最后一个图标后添加翻译文本
            const lastIcon = icons[icons.length - 1];
            if (lastIcon.nextSibling && lastIcon.nextSibling.nodeType === Node.TEXT_NODE) {
              lastIcon.nextSibling.textContent = ' ' + translation;
            } else {
              lastIcon.after(' ' + translation);
            }
          } else {
            element.textContent = translation;
          }
        }
        // 其他情况直接更新文本内容
        else {
          element.textContent = translation;
        }
      });
      
      // 更新title属性
      document.querySelectorAll('[data-i18n-title]').forEach(element => {
        const key = element.getAttribute('data-i18n-title');
        element.title = t(key);
      });
      
      // 更新alt属性
      document.querySelectorAll('[data-i18n-alt]').forEach(element => {
        const key = element.getAttribute('data-i18n-alt');
        element.alt = t(key);
      });
      
      // 更新语言选择器的值
      const languageSelect = document.getElementById('languageSelect');
      if (languageSelect) {
        languageSelect.value = currentLanguage;
      }
      
      // 保存语言设置
      localStorage.setItem('language', currentLanguage);
    }
    
    // 切换语言
    function changeLanguage(lang) {
      if (translations[lang]) {
        currentLanguage = lang;
        updateTranslations();
      }
    }
    
    // 初始化翻译
    document.addEventListener('DOMContentLoaded', () => {
      updateTranslations();
      
      // 绑定语言选择器事件
      const languageSelect = document.getElementById('languageSelect');
      if (languageSelect) {
        languageSelect.addEventListener('change', (e) => {
          changeLanguage(e.target.value);
        });
      }
    });
    
    // ==================== 翻译系统结束 ====================
    
    // 存储选中的设计图片URL
    let selectedDesignImage = null;
    
    // 图片搜索功能
    (function() {
      const imageSearchBtn = document.getElementById('imageSearchBtn');
      const imagePasteArea = document.getElementById('imagePasteArea');
      const closeImagePasteArea = document.getElementById('closeImagePasteArea');
      const pasteImageContainer = document.getElementById('pasteImageContainer');
      const pasteImagePlaceholder = document.getElementById('pasteImagePlaceholder');
      const pastedImagePreview = document.getElementById('pastedImagePreview');
      const imageSearchActions = document.getElementById('imageSearchActions');
      const searchByImageBtn = document.getElementById('searchByImageBtn');
      const clearImageBtn = document.getElementById('clearImageBtn');
      let pastedImageFile = null;
      
      // 点击相机图标显示/隐藏图片粘贴区域
      if (imageSearchBtn && imagePasteArea) {
        imageSearchBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          imagePasteArea.classList.toggle('hidden');
        });
        
        // 点击关闭按钮
        if (closeImagePasteArea) {
          closeImagePasteArea.addEventListener('click', () => {
            imagePasteArea.classList.add('hidden');
          });
        }
        
        // 点击外部区域关闭
        document.addEventListener('click', (e) => {
          if (!imagePasteArea.contains(e.target) && !imageSearchBtn.contains(e.target)) {
            imagePasteArea.classList.add('hidden');
          }
        });
      }
      
      // 粘贴图片功能
      if (pasteImageContainer) {
        // 监听粘贴事件
        document.addEventListener('paste', (e) => {
          if (!imagePasteArea.classList.contains('hidden')) {
            const items = e.clipboardData.items;
            for (let i = 0; i < items.length; i++) {
              if (items[i].type.indexOf('image') !== -1) {
                const blob = items[i].getAsFile();
                handleImageFile(blob);
                e.preventDefault();
                break;
              }
            }
          }
        });
        
        // 拖拽图片功能
        pasteImageContainer.addEventListener('dragover', (e) => {
          e.preventDefault();
          pasteImageContainer.classList.add('border-blue-500', 'bg-blue-50');
        });
        
        pasteImageContainer.addEventListener('dragleave', (e) => {
          e.preventDefault();
          pasteImageContainer.classList.remove('border-blue-500', 'bg-blue-50');
        });
        
        pasteImageContainer.addEventListener('drop', (e) => {
          e.preventDefault();
          pasteImageContainer.classList.remove('border-blue-500', 'bg-blue-50');
          
          const files = e.dataTransfer.files;
          if (files.length > 0 && files[0].type.startsWith('image/')) {
            handleImageFile(files[0]);
          }
        });
        
        // 点击区域选择文件
        pasteImageContainer.addEventListener('click', () => {
          const input = document.createElement('input');
          input.type = 'file';
          input.accept = 'image/*';
          input.onchange = (e) => {
            if (e.target.files.length > 0) {
              handleImageFile(e.target.files[0]);
            }
          };
          input.click();
        });
      }
      
      // 处理图片文件
      function handleImageFile(file) {
        if (!file.type.startsWith('image/')) {
          alert('请选择图片文件');
          return;
        }
        
        pastedImageFile = file;
        
        const reader = new FileReader();
        reader.onload = (e) => {
          pastedImagePreview.src = e.target.result;
          pastedImagePreview.classList.remove('hidden');
          pasteImagePlaceholder.classList.add('hidden');
          imageSearchActions.classList.remove('hidden');
        };
        reader.readAsDataURL(file);
      }
      
      // 搜索相似图片
      if (searchByImageBtn) {
        searchByImageBtn.addEventListener('click', () => {
          if (pastedImageFile) {
            // 这里可以调用后台API进行图片搜索
            // 例如：uploadImageAndSearch(pastedImageFile);
            console.log('搜索相似图片', pastedImageFile);
            alert('正在搜索相似图片...（这里会调用后台API）');
            // 实际实现时，可以发送图片到后台，然后显示搜索结果
          }
        });
      }
      
      // 清除图片
      if (clearImageBtn) {
        clearImageBtn.addEventListener('click', () => {
          pastedImageFile = null;
          pastedImagePreview.src = '';
          pastedImagePreview.classList.add('hidden');
          pasteImagePlaceholder.classList.remove('hidden');
          imageSearchActions.classList.add('hidden');
        });
      }
    })();
    
    // 产品数据（包含规格信息）
    const productsData = [
      {
        id: 1,
        name: "饮料包装设计 #DRK-2023",
        description: "适用于果汁和碳酸饮料的防渗透包装",
        image: "customer_designs/Unikai/UNIKAI-1.jpg",
        format: "200S",
        machine: "Tetra Pak A3",
        filling: "果汁",
        material: "PE-Al-Paper",
        productGroup: "10-无菌包",
        series: "片材",
        certifications: ["PEFC", "FSC"]
      },
      {
        id: 2,
        name: "乳品包装设计 #DARY-2024",
        description: "长效保鲜的乳制品无菌包装方案",
        image: "customer_designs/Unikai/UNIKAI-4.jpg",
        format: "LBA1000B",
        machine: "SIG CFA122",
        filling: "乳制品",
        material: "PET-Paper",
        productGroup: "10-无菌包",
        series: "片材",
        certifications: ["FSC"]
      },
      {
        id: 3,
        name: "定制礼盒 #GIFT-001",
        description: "高端商务礼品包装解决方案",
        image: "customer_designs/Unikai/UNIKAI-9.jpg",
        format: "1000B",
        machine: "乐美 LP200",
        filling: "汤类",
        material: "Paper",
        productGroup: "30-定制包",
        series: "盖子",
        certifications: ["PEFC"]
      },
      {
        id: 4,
        name: "牛奶包装设计 #MILK-2024",
        description: "UHT牛奶专用包装设计",
        image: "customer_designs/RFG/RFG-1.jpg",
        format: "200S",
        machine: "Tetra Pak A3",
        filling: "UHT牛奶",
        material: "PE-Al-Paper",
        productGroup: "10-无菌包",
        series: "片材",
        certifications: ["PEFC", "FSC"]
      },
      {
        id: 5,
        name: "豆奶包装设计 #SOY-2023",
        description: "豆奶专用无菌包装",
        image: "customer_designs/RFG/RFG-2.jpg",
        format: "LBA100B-H",
        machine: "SIG CFA122",
        filling: "豆奶",
        material: "PET-Paper",
        productGroup: "20-标准包",
        series: "卷材",
        certifications: []
      },
      {
        id: 6,
        name: "果汁包装设计 #JUICE-2024",
        description: "新鲜果汁包装方案",
        image: "customer_designs/RFG/RFG-3.jpg",
        format: "200S",
        machine: "Tetra Pak A3",
        filling: "果汁",
        material: "PE-Al-Paper",
        productGroup: "10-无菌包",
        series: "片材",
        certifications: ["FSC"]
      }
    ];
    
    // 筛选和显示产品
    function filterAndDisplayProducts() {
      const format = document.getElementById('filter-format')?.value || '';
      const machine = document.getElementById('filter-machine')?.value || '';
      const filling = document.getElementById('filter-filling')?.value || '';
      const material = document.getElementById('filter-material')?.value || '';
      const productGroup = document.getElementById('filter-product-group')?.value || '';
      const series = document.getElementById('filter-series')?.value || '';
      const pefc = document.getElementById('filter-pefc')?.checked || false;
      const fsc = document.getElementById('filter-fsc')?.checked || false;
      const search = document.getElementById('filter-search')?.value.toLowerCase() || '';
      
      // 筛选产品
      let filteredProducts = productsData.filter(product => {
        // 规格筛选
        if (format && !product.format.includes(format)) return false;
        // 灌装机型号筛选
        if (machine && product.machine !== machine) return false;
        // 填充物类型筛选
        if (filling && product.filling !== filling) return false;
        // 材料结构筛选
        if (material && product.material !== material) return false;
        // 产品组筛选
        if (productGroup && product.productGroup !== productGroup) return false;
        // 系列筛选
        if (series && product.series !== series) return false;
        // 认证要求筛选
        if (pefc && !product.certifications.includes('PEFC')) return false;
        if (fsc && !product.certifications.includes('FSC')) return false;
        // 搜索筛选
        if (search && !product.name.toLowerCase().includes(search) && 
            !product.description.toLowerCase().includes(search)) return false;
        return true;
      });
      
      // 按规格分组
      const groupedByFormat = {};
      filteredProducts.forEach(product => {
        if (!groupedByFormat[product.format]) {
          groupedByFormat[product.format] = [];
        }
        groupedByFormat[product.format].push(product);
      });
      
      // 渲染产品
      const container = document.getElementById('products-container');
      if (!container) return;
      
      if (Object.keys(groupedByFormat).length === 0) {
        container.innerHTML = '<div class="text-center py-12 text-gray-500">没有找到符合条件的产品</div>';
        return;
      }
      
      let html = '';
      Object.keys(groupedByFormat).sort().forEach(format => {
        html += `
          <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6">
            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
              <span class="iconify text-blue-600 mr-2" data-icon="mdi:package-variant"></span>
              规格: ${format}
              <span class="ml-2 text-sm font-normal text-gray-500">(${groupedByFormat[format].length}个产品)</span>
            </h4>
            <div class="grid grid-cols-2 gap-4">
        `;
        
        groupedByFormat[format].forEach(product => {
          html += `
            <div class="bg-gray-50 rounded-lg border border-gray-200 overflow-hidden hover:shadow-md transition">
              <img alt="${product.name}" class="w-full h-32 object-cover" src="${product.image}"/>
              <div class="p-4">
                <h5 class="font-semibold text-gray-800 mb-2">${product.name}</h5>
                <p class="text-gray-600 text-sm mb-3">${product.description}</p>
                <div class="text-xs text-gray-500 mb-3 space-y-1">
                  <div>产品组: ${product.productGroup}</div>
                  <div>系列: ${product.series}</div>
                  <div>灌装机: ${product.machine}</div>
                  <div>填充物: ${product.filling}</div>
                  <div>材料: ${product.material}</div>
                </div>
                <button class="select-design-btn w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition" 
                        data-image-src="${product.image}" 
                        data-product-id="${product.id}">
                  选择此设计
                </button>
              </div>
            </div>
          `;
        });
        
        html += `
            </div>
          </div>
        `;
      });
      
      container.innerHTML = html;
      
      // 重新绑定选择设计按钮事件
      document.querySelectorAll('.select-design-btn').forEach(button => {
        button.addEventListener('click', () => {
          selectedDesignImage = button.dataset.imageSrc;
          
          // 移除其他按钮的选中状态
          document.querySelectorAll('.select-design-btn').forEach(btn => {
            btn.classList.remove('bg-green-600');
            btn.classList.add('bg-blue-600');
          });
          
          // 高亮当前选中的按钮
          button.classList.remove('bg-blue-600');
          button.classList.add('bg-green-600');
        });
      });
    }
    
    // 初始化产品显示
    filterAndDisplayProducts();
    
    // 绑定筛选事件
    document.querySelectorAll('.filter-select, .filter-input, .filter-checkbox').forEach(element => {
      element.addEventListener('change', filterAndDisplayProducts);
      element.addEventListener('input', filterAndDisplayProducts);
    });
    
    // 确认下单函数 - 跳转到我的订单页面
    function confirmOrder() {
      // 切换到"我的订单"标签页
      const ordersTabBtn = document.querySelector('.tab-btn[data-tab="orders"]');
      const ordersSection = document.getElementById('orders');
      const ordersList = document.getElementById('ordersList');
      const orderDetail = document.getElementById('orderDetail');
      const complaintPage = document.getElementById('complaintPage');
      
      // 移除所有标签页按钮的激活状态
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('bg-blue-700'));
      // 移除所有标签页内容的激活状态
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('tab-active'));
      
      // 激活"我的订单"标签页
      ordersTabBtn.classList.add('bg-blue-700');
      ordersSection.classList.add('tab-active');
      
      // 确保显示订单列表，隐藏订单详情和客诉页面
      if (ordersList) ordersList.classList.remove('hidden');
      if (orderDetail) orderDetail.classList.add('hidden');
      if (complaintPage) complaintPage.classList.add('hidden');
    }
    
    // 购物车数据结构
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    // 更新购物车数量显示
    function updateCartCount() {
      const cartCount = document.getElementById('cartCount');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      if (cartCount) {
        if (totalItems > 0) {
          cartCount.textContent = totalItems;
          cartCount.classList.remove('hidden');
        } else {
          cartCount.classList.add('hidden');
        }
      }
    }
    
    // 保存购物车到本地存储
    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      renderCart();
    }
    
    // 添加商品到购物车
    function addToCart(productData) {
      // 如果没有传入productData，尝试从当前页面获取
      if (!productData) {
        // 从下单页面获取商品信息
        const productNameEl = document.getElementById('orderProductName');
        const materialNumberEl = document.getElementById('orderMaterialNumber');
        const formatEl = document.getElementById('orderFormat');
        const materialEl = document.getElementById('orderMaterial');
        const quantityEl = document.getElementById('orderQuantity');
        
        if (!productNameEl) {
          alert('请先选择商品设计');
          return;
        }
        
        const productName = productNameEl.textContent || '未命名商品';
        const materialNumber = materialNumberEl?.textContent || '';
        const format = formatEl?.textContent || '未分类';
        const material = materialEl?.textContent || '';
        const quantity = parseInt(quantityEl?.value) || 1;
        const price = 49.00; // 默认价格，实际应该从页面获取
        
        productData = {
          id: Date.now(),
          name: productName,
          materialNumber: materialNumber,
          image: selectedDesignImage || document.getElementById('mainProductImg')?.src || 'customer_designs/RFG/RFG-1.jpg',
          format: format,
          quantity: quantity,
          price: price,
          material: material,
          machine: 'Tetra Pak A3',
          filling: 'UHT牛奶'
        };
      }
      
      // 检查购物车中是否已有相同商品
      const existingItem = cart.find(item => 
        item.id === productData.id && 
        item.format === productData.format
      );
      
      if (existingItem) {
        existingItem.quantity += productData.quantity || 1;
      } else {
        cart.push({
          ...productData,
          quantity: productData.quantity || 1
        });
      }
      
      saveCart();
      alert('商品已成功加入购物车！');
    }
    
    // 从购物车移除商品
    function removeFromCart(itemId) {
      cart = cart.filter(item => item.id !== itemId);
      saveCart();
    }
    
    // 更新购物车商品数量
    function updateCartItemQuantity(itemId, quantity) {
      const item = cart.find(item => item.id === itemId);
      if (item) {
        if (quantity <= 0) {
          removeFromCart(itemId);
        } else {
          item.quantity = quantity;
          saveCart();
        }
      }
    }
    
    // 渲染购物车
    function renderCart() {
      const cartContainer = document.getElementById('cartContainer');
      const cartActions = document.getElementById('cartActions');
      const cartTotalItems = document.getElementById('cartTotalItems');
      const cartTotalPrice = document.getElementById('cartTotalPrice');
      
      if (!cartContainer) return;
      
      if (cart.length === 0) {
        cartContainer.innerHTML = '<div class="text-center py-12 text-gray-500">购物车是空的，快去添加商品吧！</div>';
        if (cartActions) cartActions.classList.add('hidden');
        if (cartTotalItems) cartTotalItems.textContent = '0';
        if (cartTotalPrice) cartTotalPrice.textContent = '0.00';
        return;
      }
      
      // 按规格分组
      const groupedByFormat = {};
      cart.forEach(item => {
        const format = item.format || '未分类';
        if (!groupedByFormat[format]) {
          groupedByFormat[format] = [];
        }
        groupedByFormat[format].push(item);
      });
      
      // 计算总金额
      const totalPrice = cart.reduce((sum, item) => sum + (item.price || 0) * item.quantity, 0);
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      
      if (cartTotalItems) cartTotalItems.textContent = totalItems;
      if (cartTotalPrice) cartTotalPrice.textContent = totalPrice.toFixed(2);
      if (cartActions) cartActions.classList.remove('hidden');
      
      // 渲染商品列表
      let html = '';
      Object.keys(groupedByFormat).sort().forEach(format => {
        html += `
          <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6">
            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
              <span class="iconify text-blue-600 mr-2" data-icon="mdi:package-variant"></span>
              规格: ${format}
              <span class="ml-2 text-sm font-normal text-gray-500">(${groupedByFormat[format].length}个商品)</span>
            </h4>
            <div class="space-y-4">
        `;
        
        groupedByFormat[format].forEach(item => {
          const itemTotal = (item.price || 0) * item.quantity;
          html += `
            <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 flex items-center gap-4">
              <img src="${item.image || 'customer_designs/RFG/RFG-1.jpg'}" alt="${item.name}" class="w-24 h-24 object-cover rounded-lg flex-shrink-0"/>
              <div class="flex-1">
                <h5 class="font-semibold text-gray-800 mb-1">${item.name}</h5>
                <div class="text-xs text-gray-500 space-y-1">
                  ${item.material ? `<div>材料: ${item.material}</div>` : ''}
                  ${item.machine ? `<div>灌装机: ${item.machine}</div>` : ''}
                  ${item.filling ? `<div>填充物: ${item.filling}</div>` : ''}
                </div>
              </div>
              <div class="flex items-center space-x-4">
                <div class="text-right">
                  <div class="text-sm text-gray-600 mb-2">单价: ¥${(item.price || 0).toFixed(2)}</div>
                  <div class="font-semibold text-green-600">小计: ¥${itemTotal.toFixed(2)}</div>
                </div>
                <div class="flex items-center space-x-2">
                  <button class="update-quantity-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded" data-item-id="${item.id}" data-action="decrease">-</button>
                  <input type="number" class="quantity-input w-16 text-center border border-gray-300 rounded py-1" value="${item.quantity}" min="1" data-item-id="${item.id}"/>
                  <button class="update-quantity-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded" data-item-id="${item.id}" data-action="increase">+</button>
                </div>
                <button class="remove-item-btn text-red-500 hover:text-red-700 px-3 py-1" data-item-id="${item.id}">
                  <span class="iconify" data-icon="mdi:delete"></span>
                </button>
              </div>
            </div>
          `;
        });
        
        html += `
            </div>
          </div>
        `;
      });
      
      cartContainer.innerHTML = html;
      
      // 绑定事件
      document.querySelectorAll('.update-quantity-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const itemId = parseInt(btn.dataset.itemId);
          const action = btn.dataset.action;
          const input = document.querySelector(`.quantity-input[data-item-id="${itemId}"]`);
          let quantity = parseInt(input.value) || 1;
          
          if (action === 'increase') {
            quantity += 1;
          } else if (action === 'decrease') {
            quantity = Math.max(1, quantity - 1);
          }
          
          input.value = quantity;
          updateCartItemQuantity(itemId, quantity);
        });
      });
      
      document.querySelectorAll('.quantity-input').forEach(input => {
        input.addEventListener('change', () => {
          const itemId = parseInt(input.dataset.itemId);
          const quantity = parseInt(input.value) || 1;
          updateCartItemQuantity(itemId, quantity);
        });
      });
      
      document.querySelectorAll('.remove-item-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const itemId = parseInt(btn.dataset.itemId);
          if (confirm('确定要删除这个商品吗？')) {
            removeFromCart(itemId);
          }
        });
      });
      
      // 绑定清空购物车按钮
      const clearCartBtn = document.querySelector('#cartActions button.bg-gray-300');
      if (clearCartBtn) {
        clearCartBtn.onclick = () => {
          if (confirm('确定要清空购物车吗？')) {
            cart = [];
            saveCart();
          }
        };
      }
    }
    
    // 初始化购物车
    updateCartCount();
    
    // 数量增减函数
    function increaseQuantity() {
      const quantityEl = document.getElementById('orderQuantity');
      if (quantityEl) {
        quantityEl.value = parseInt(quantityEl.value || 1) + 1;
      }
    }
    
    function decreaseQuantity() {
      const quantityEl = document.getElementById('orderQuantity');
      if (quantityEl) {
        const current = parseInt(quantityEl.value || 1);
        quantityEl.value = Math.max(1, current - 1);
      }
    }
    
    // 购物车按钮点击事件
    const cartBtn = document.getElementById('cartBtn');
    if (cartBtn) {
      cartBtn.addEventListener('click', () => {
        // 直接显示购物车section
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('tab-active'));
        const cartSection = document.getElementById('cart');
        if (cartSection) {
          cartSection.classList.add('tab-active');
        }
        renderCart();
      });
    }
    
    // 标签页切换功能
    document.querySelectorAll('.tab-btn').forEach(button => {
      button.addEventListener('click', () => {
        // 移除所有激活状态
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('bg-blue-700'));
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('tab-active'));
        
        // 添加当前激活状态
        button.classList.add('bg-blue-700');
        document.getElementById(button.dataset.tab).classList.add('tab-active');
        
        // 画稿管理（新）tab：显示/隐藏「联系乐美」浮动按钮
        const openChatBtn = document.getElementById('openLemiChatBtn');
        const chatWidget = document.getElementById('lemiChatWidget');
        if (button.dataset.tab === 'design-management-new') {
          if (openChatBtn && (!chatWidget || chatWidget.classList.contains('hidden'))) openChatBtn.classList.remove('hidden');
        } else {
          if (openChatBtn) openChatBtn.classList.add('hidden');
          if (chatWidget) chatWidget.classList.add('hidden');
        }
      });
    });
    
    // 页脚快捷入口 - 点击切换 tab
    document.querySelectorAll('.tab-btn-footer').forEach(btn => {
      btn.addEventListener('click', () => {
        const tab = btn.dataset.tab;
        if (!tab) return;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('bg-blue-700'));
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('tab-active'));
        const navBtn = document.querySelector(`.tab-btn[data-tab="${tab}"]`);
        const content = document.getElementById(tab);
        if (navBtn) navBtn.classList.add('bg-blue-700');
        if (content) content.classList.add('tab-active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        // 画稿管理（新）tab：显示浮动「联系乐美」按钮
        const openChatBtn = document.getElementById('openLemiChatBtn');
        const chatWidget = document.getElementById('lemiChatWidget');
        if (tab === 'design-management-new') {
          if (openChatBtn && (!chatWidget || chatWidget.classList.contains('hidden'))) openChatBtn.classList.remove('hidden');
        } else {
          if (openChatBtn) openChatBtn.classList.add('hidden');
          if (chatWidget) chatWidget.classList.add('hidden');
        }
      });
    });
    
    // ==================== 画稿管理（新）模块 ====================
    const DESIGN_NEW_STORAGE_KEY = 'design_new_artworks';
    
    function getDesignNewArtworks() {
      try {
        return JSON.parse(localStorage.getItem(DESIGN_NEW_STORAGE_KEY) || '[]');
      } catch {
        return [];
      }
    }
    
    function saveDesignNewArtworks(list) {
      localStorage.setItem(DESIGN_NEW_STORAGE_KEY, JSON.stringify(list));
    }
    
    function generateDesignCode() {
      const t = Date.now().toString(36).toUpperCase();
      const r = Math.random().toString(36).slice(2, 6).toUpperCase();
      return `DC-${t}-${r}`;
    }
    
    const newArtworkBtn = document.getElementById('newArtworkBtn');
    const editExistingArtworkBtn = document.getElementById('editExistingArtworkBtn');
    const backToDesignNewMainBtn = document.getElementById('backToDesignNewMainBtn');
    const cancelNewArtworkBtn = document.getElementById('cancelNewArtworkBtn');
    const backToDesignNewListBtn = document.getElementById('backToDesignNewListBtn');
    const designNewMainView = document.getElementById('design-new-main-view');
    const designNewFormView = document.getElementById('design-new-form-view');
    const designNewListView = document.getElementById('design-new-list-view');
    const newArtworkForm = document.getElementById('newArtworkForm');
    const editingArtworkIdInput = document.getElementById('editingArtworkId');
    const designCodeText = document.getElementById('designCodeText');
    const newArtworkFormTitle = document.getElementById('newArtworkFormTitle');
    const designNewArtworkTableBody = document.getElementById('designNewArtworkTableBody');
    const designNewEmptyState = document.getElementById('designNewEmptyState');
    
    function showDesignNewView(view) {
      [designNewMainView, designNewFormView, designNewListView].forEach((v, i) => {
        if (v) v.classList.toggle('hidden', i !== view);
      });
    }
    
    function resetNewArtworkForm() {
      if (newArtworkForm) newArtworkForm.reset();
      if (editingArtworkIdInput) editingArtworkIdInput.value = '';
      if (designCodeText) designCodeText.textContent = '提交后系统将自动生成';
      if (newArtworkFormTitle) newArtworkFormTitle.textContent = '填写新画稿';
      const submitBtnText = document.getElementById('newArtworkSubmitBtnText');
      if (submitBtnText) submitBtnText.textContent = '提交';
    }
    
    function fillFormForEdit(artwork) {
      if (!artwork) return;
      if (editingArtworkIdInput) editingArtworkIdInput.value = artwork.id;
      if (designCodeText) designCodeText.textContent = artwork.designCode || '-';
      if (newArtworkFormTitle) newArtworkFormTitle.textContent = '修改画稿信息';
      const form = newArtworkForm;
      if (!form) return;
      const setVal = (name, val) => {
        const el = form.querySelector(`[name="${name}"]`);
        if (el) { el.value = val || ''; if (el.type === 'radio') el.checked = el.value === val; }
      };
      const setRadio = (name, val) => {
        form.querySelectorAll(`[name="${name}"]`).forEach(r => { r.checked = r.value === val; });
      };
      setVal('paperboard', artwork.paperboard);
      setVal('artworkType', artwork.artworkType);
      setVal('colorTarget', artwork.colorTarget);
      setVal('printPlant', artwork.printPlant);
      setVal('productTitle', artwork.productTitle);
      setVal('format', artwork.format);
      setVal('opening', artwork.opening);
      setVal('logo', artwork.logo);
      setRadio('multipleStyles', artwork.multipleStyles);
      const submitBtnText = document.getElementById('newArtworkSubmitBtnText');
      if (submitBtnText) submitBtnText.textContent = '保存';
    }
    
    function collectFormData() {
      const form = newArtworkForm;
      if (!form) return null;
      const fd = new FormData(form);
      return {
        paperboard: fd.get('paperboard') || '',
        artworkType: fd.get('artworkType') || '',
        colorTarget: fd.get('colorTarget') || '',
        printPlant: fd.get('printPlant') || '',
        productTitle: fd.get('productTitle') || '',
        format: fd.get('format') || '',
        opening: fd.get('opening') || '',
        logo: fd.get('logo') || '',
        multipleStyles: fd.get('multipleStyles') || '否',
      };
    }
    
    function renderDesignNewTable() {
      const list = getDesignNewArtworks();
      const tbody = designNewArtworkTableBody;
      const empty = designNewEmptyState;
      const tableWrap = tbody && tbody.closest('.overflow-x-auto');
      if (!tbody) return;
      
      if (list.length === 0) {
        if (tableWrap) tableWrap.classList.add('hidden');
        if (empty) empty.classList.remove('hidden');
        return;
      }
      if (tableWrap) tableWrap.classList.remove('hidden');
      if (empty) empty.classList.add('hidden');
      
      tbody.innerHTML = list.map(a => {
        const statusMap = { '待审核': 'bg-amber-100 text-amber-800', '审核中': 'bg-blue-100 text-blue-800', '已完成': 'bg-green-100 text-green-800' };
        const statusClass = statusMap[a.status] || 'bg-gray-100 text-gray-700';
        return `
<tr class="border-b border-gray-200 hover:bg-gray-50 transition">
<td class="px-4 py-3 text-blue-600 font-medium">${a.designCode || '-'}</td>
<td class="px-4 py-3 text-gray-700">${a.paperboard || '-'}</td>
<td class="px-4 py-3 text-gray-700">${a.format || '-'}</td>
<td class="px-4 py-3 text-gray-700">${a.opening || '-'}</td>
<td class="px-4 py-3 text-gray-700">${a.logo || '-'}</td>
<td class="px-4 py-3"><span class="px-2 py-1 rounded-full text-xs font-medium ${statusClass}">${a.status || '待审核'}</span></td>
<td class="px-4 py-3 text-right">
<div class="flex items-center justify-end gap-2">
<button type="button" class="btn-contact-lemi inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 text-sm font-medium transition" data-id="${a.id}">
<span class="iconify text-base mr-1" data-icon="mdi:chat"></span>联系乐美
</button>
<button type="button" class="btn-edit-artwork inline-flex items-center px-3 py-1.5 rounded-lg bg-amber-50 text-amber-700 hover:bg-amber-100 text-sm font-medium transition" data-id="${a.id}">
<span class="iconify text-base mr-1" data-icon="mdi:pencil"></span>修改信息
</button>
<button type="button" class="btn-view-design inline-flex items-center px-3 py-1.5 rounded-lg bg-green-50 text-green-700 hover:bg-green-100 text-sm font-medium transition" data-id="${a.id}">
<span class="iconify text-base mr-1" data-icon="mdi:image-multiple"></span>查看图片
</button>
</div>
</td>
</tr>`;
      }).join('');
    }
    
    if (newArtworkBtn && designNewMainView && designNewFormView) {
      newArtworkBtn.addEventListener('click', () => {
        resetNewArtworkForm();
        showDesignNewView(1);
      });
    }
    
    if (editExistingArtworkBtn && designNewListView) {
      editExistingArtworkBtn.addEventListener('click', () => {
        showDesignNewView(2);
        renderDesignNewTable();
      });
    }
    
    function showDesignNewMain() {
      resetNewArtworkForm();
      showDesignNewView(0);
    }
    
    if (backToDesignNewMainBtn) backToDesignNewMainBtn.addEventListener('click', showDesignNewMain);
    if (cancelNewArtworkBtn) cancelNewArtworkBtn.addEventListener('click', showDesignNewMain);
    
    if (backToDesignNewListBtn) {
      backToDesignNewListBtn.addEventListener('click', () => showDesignNewMain());
    }
    
    if (newArtworkForm) {
      newArtworkForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const data = collectFormData();
        if (!data) return;
        const editId = editingArtworkIdInput && editingArtworkIdInput.value ? editingArtworkIdInput.value : null;
        const list = getDesignNewArtworks();
        
        if (editId) {
          const idx = list.findIndex(x => x.id === editId);
          if (idx >= 0) {
            list[idx] = { ...list[idx], ...data, updatedAt: new Date().toISOString() };
            saveDesignNewArtworks(list);
            showDesignNewView(2);
            renderDesignNewTable();
          }
        } else {
          const newItem = {
            id: 'aw-' + Date.now() + '-' + Math.random().toString(36).slice(2, 8),
            designCode: generateDesignCode(),
            status: '待审核',
            ...data,
            createdAt: new Date().toISOString(),
          };
          list.unshift(newItem);
          saveDesignNewArtworks(list);
          showDesignNewView(2);
          renderDesignNewTable();
        }
      });
    }
    
    document.addEventListener('click', (e) => {
      const contactBtn = e.target.closest('.btn-contact-lemi');
      const editBtn = e.target.closest('.btn-edit-artwork');
      const viewBtn = e.target.closest('.btn-view-design');
      if (contactBtn) {
        const id = contactBtn.dataset.id;
        document.getElementById('lemiChatWidget')?.classList.remove('hidden');
        document.getElementById('openLemiChatBtn')?.classList.add('hidden');
      }
      if (editBtn) {
        const id = editBtn.dataset.id;
        const list = getDesignNewArtworks();
        const a = list.find(x => x.id === id);
        if (a) {
          fillFormForEdit(a);
          showDesignNewView(1);
        }
      }
      if (viewBtn) {
        const id = viewBtn.dataset.id;
        const list = getDesignNewArtworks();
        const a = list.find(x => x.id === id);
        if (a) openDesignImagesModal(a);
      }
    });
    
    const lemiChatWidget = document.getElementById('lemiChatWidget');
    const openLemiChatBtn = document.getElementById('openLemiChatBtn');
    const closeLemiChatBtn = document.getElementById('closeLemiChatBtn');
    const lemiChatInput = document.getElementById('lemiChatInput');
    const lemiChatSendBtn = document.getElementById('lemiChatSendBtn');
    const lemiChatMessages = document.getElementById('lemiChatMessages');
    
    if (closeLemiChatBtn && lemiChatWidget) {
      closeLemiChatBtn.addEventListener('click', () => {
        lemiChatWidget.classList.add('hidden');
        if (openLemiChatBtn) openLemiChatBtn.classList.remove('hidden');
      });
    }
    
    if (openLemiChatBtn && lemiChatWidget) {
      openLemiChatBtn.addEventListener('click', () => {
        lemiChatWidget.classList.remove('hidden');
        openLemiChatBtn.classList.add('hidden');
      });
    }
    
    // 聊天浮窗：拖动（用 left/top，可在整个视口内自由移动，含左侧、中间、右侧）
    const lemiChatHeader = document.getElementById('lemiChatHeader');
    if (lemiChatHeader && lemiChatWidget) {
      lemiChatHeader.addEventListener('mousedown', (e) => {
        if (e.target.closest('#closeLemiChatBtn')) return;
        e.preventDefault();
        const rect = lemiChatWidget.getBoundingClientRect();
        const startLeft = rect.left;
        const startTop = rect.top;
        const startMouseX = e.clientX;
        const startMouseY = e.clientY;
        const onMove = (ev) => {
          const dx = ev.clientX - startMouseX;
          const dy = ev.clientY - startMouseY;
          const w = lemiChatWidget.offsetWidth;
          const h = lemiChatWidget.offsetHeight;
          const vw = window.innerWidth;
          const vh = window.innerHeight;
          let newLeft = startLeft + dx;
          let newTop = startTop + dy;
          newLeft = Math.max(0, Math.min(newLeft, vw - w));
          newTop = Math.max(0, Math.min(newTop, vh - 40));
          lemiChatWidget.style.left = newLeft + 'px';
          lemiChatWidget.style.top = newTop + 'px';
        };
        const onUp = () => {
          document.removeEventListener('mousemove', onMove);
          document.removeEventListener('mouseup', onUp);
        };
        document.addEventListener('mousemove', onMove);
        document.addEventListener('mouseup', onUp);
      });
    }
    
    // 聊天浮窗：缩放（右下角拖动）
    const lemiChatResizeHandle = document.getElementById('lemiChatResizeHandle');
    if (lemiChatResizeHandle && lemiChatWidget) {
      const MIN_W = 384, MIN_H = 400;
      let resizeStartX = 0, resizeStartY = 0, startW = 0, startH = 0;
      lemiChatResizeHandle.addEventListener('mousedown', (e) => {
        e.preventDefault();
        resizeStartX = e.clientX;
        resizeStartY = e.clientY;
        startW = lemiChatWidget.offsetWidth;
        startH = lemiChatWidget.offsetHeight;
        const maxW = Math.floor(window.innerWidth / 3);
        const maxH = Math.floor(window.innerHeight / 3);
        const onMove = (ev) => {
          const dw = ev.clientX - resizeStartX;
          const dh = ev.clientY - resizeStartY;
          let w = Math.max(MIN_W, Math.min(startW + dw, maxW));
          let h = Math.max(MIN_H, Math.min(startH + dh, maxH));
          lemiChatWidget.style.width = w + 'px';
          lemiChatWidget.style.height = h + 'px';
        };
        const onUp = () => {
          document.removeEventListener('mousemove', onMove);
          document.removeEventListener('mouseup', onUp);
        };
        document.addEventListener('mousemove', onMove);
        document.addEventListener('mouseup', onUp);
      });
    }
    
    if (lemiChatSendBtn && lemiChatInput && lemiChatMessages) {
      lemiChatSendBtn.addEventListener('click', () => {
        const text = lemiChatInput.value.trim();
        if (!text) return;
        const div = document.createElement('div');
        div.className = 'flex justify-end';
        div.innerHTML = `<div class="bg-blue-600 text-white rounded-lg rounded-tr-none px-3 py-2 max-w-[85%] text-sm">${text}</div>`;
        lemiChatMessages.appendChild(div);
        lemiChatInput.value = '';
        lemiChatMessages.scrollTop = lemiChatMessages.scrollHeight;
        setTimeout(() => {
          const reply = document.createElement('div');
          reply.className = 'flex justify-start';
          reply.innerHTML = `<div class="bg-white rounded-lg rounded-tl-none px-3 py-2 shadow-sm max-w-[85%] text-sm text-gray-800">收到您的消息，客服将尽快回复。</div>`;
          lemiChatMessages.appendChild(reply);
          lemiChatMessages.scrollTop = lemiChatMessages.scrollHeight;
        }, 800);
      });
    }
    
    if (lemiChatInput) {
      lemiChatInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && lemiChatSendBtn) lemiChatSendBtn.click();
      });
    }
    
    function openDesignImagesModal(artwork) {
      const modal = document.getElementById('designImagesModal');
      const title = document.getElementById('designImagesModalTitle');
      const body = document.getElementById('designImagesModalBody');
      if (!modal || !body) return;
      if (title) title.textContent = `画稿设计图片 - ${artwork.designCode || artwork.productTitle || '画稿'}`;
      const versions = [
        { name: '设计版本 V1 (当前版本)', date: '2025-11-20', isCurrent: true },
        { name: '设计版本 V0 (历史版本)', date: '2025-11-15', isCurrent: false },
      ];
      body.innerHTML = `
<div class="space-y-6">
${versions.map((v, i) => `
<div class="border border-gray-200 rounded-xl overflow-hidden">
<div class="px-4 py-3 bg-gray-50 flex items-center justify-between border-b border-gray-200">
<div class="flex items-center">
<span class="iconify ${v.isCurrent ? 'text-green-500' : 'text-gray-400'} mr-2" data-icon="mdi:file-${v.isCurrent ? 'check' : 'document'}"></span>
<span class="text-sm font-medium">${v.name}</span>
</div>
<span class="text-xs text-gray-500">${v.date}</span>
</div>
<div class="p-4 flex items-center gap-3 overflow-x-auto pb-2">
${[1,2,3,4,5].map(n => `
<div class="flex-shrink-0 w-24 h-24 bg-gray-100 rounded border border-gray-300 flex items-center justify-center cursor-pointer hover:border-blue-500 transition">
<span class="iconify text-3xl text-gray-400" data-icon="mdi:image"></span>
</div>
`).join('')}
</div>
</div>
`).join('')}
</div>`;
      modal.classList.remove('hidden');
    }
    
    const closeDesignImagesModalBtn = document.getElementById('closeDesignImagesModalBtn');
    const designImagesModal = document.getElementById('designImagesModal');
    if (closeDesignImagesModalBtn && designImagesModal) {
      closeDesignImagesModalBtn.addEventListener('click', () => designImagesModal.classList.add('hidden'));
    }
    if (designImagesModal) {
      designImagesModal.addEventListener('click', (e) => {
        if (e.target === designImagesModal) designImagesModal.classList.add('hidden');
      });
    }
    
    // 订单配置步骤切换
    document.querySelectorAll('.step-btn').forEach(button => {
      button.addEventListener('click', () => {
        // 移除所有激活状态
        document.querySelectorAll('.step-btn').forEach(btn => btn.classList.remove('bg-blue-600', 'text-white'));
        document.querySelectorAll('.step').forEach(step => step.classList.remove('step-active'));
        
        // 添加当前激活状态
        button.classList.add('bg-blue-600', 'text-white');
        document.getElementById(button.dataset.step).classList.add('step-active');
      });
    });
    
    // 步骤导航按钮
    document.querySelectorAll('.next-step').forEach(button => {
      button.addEventListener('click', () => {
        if(button.dataset.target) {
          const currentStep = button.closest('.step');
          currentStep.classList.remove('step-active');
          document.getElementById(button.dataset.target).classList.add('step-active');
          
          // 如果是从step1切换到step2，且已选择设计图片，则更新下单页面的图片
          if(button.dataset.target === 'step2' && selectedDesignImage) {
            const mainProductImg = document.getElementById('mainProductImg');
            if(mainProductImg) {
              mainProductImg.src = selectedDesignImage;
            }
          }
          
          // 更新步骤按钮状态
          const stepBtn = document.querySelector(`.step-btn[data-step="${button.dataset.target}"]`);
          document.querySelectorAll('.step-btn').forEach(btn => btn.classList.remove('bg-blue-600', 'text-white'));
          stepBtn.classList.add('bg-blue-600', 'text-white');
        }
      });
    });
    
    document.querySelectorAll('.prev-step').forEach(button => {
      button.addEventListener('click', () => {
        const currentStep = button.closest('.step');
        currentStep.classList.remove('step-active');
        document.getElementById(button.dataset.target).classList.add('step-active');
        
        // 更新步骤按钮状态
        const stepBtn = document.querySelector(`.step-btn[data-step="${button.dataset.target}"]`);
        document.querySelectorAll('.step-btn').forEach(btn => btn.classList.remove('bg-blue-600', 'text-white'));
        stepBtn.classList.add('bg-blue-600', 'text-white');
      });
    });
    
    // 订单SKU数据（示例数据，实际应该从API获取）
    const orderSKUData = [
      {
        id: 1,
        name: "饮料包装设计 #DRK-2023",
        materialNumber: "NP-20345-1",
        format: "200S 160C*4.2U-Straw",
        material: "PE-Al-Paper",
        machine: "Tetra Pak A3",
        filling: "UHT牛奶",
        paperRequirement: "FSC认证原纸",
        certifications: ["PEFC", "FSC"],
        quantity: 100,
        unit: "箱",
        unitPrice: 45.80,
        subtotal: 4900.00,
        mainImage: "customer_designs/OAT/FLOAT-1.jpg",
        detailImages: [
          "customer_designs/OAT/FLOAT-2.jpg",
          "customer_designs/OAT/FLOAT-4.jpg",
          "customer_designs/OAT/FLOAT-5.jpg",
          "customer_designs/OAT/FLOAT-6.jpg"
        ]
      },
      {
        id: 2,
        name: "乳品包装设计 #DARY-2024",
        materialNumber: "NP-20345-2",
        format: "LBA1000B",
        material: "PET-Paper",
        machine: "SIG CFA122",
        filling: "乳制品",
        paperRequirement: "标准原纸",
        certifications: ["FSC"],
        quantity: 100,
        unit: "箱",
        unitPrice: 48.00,
        subtotal: 4800.00,
        mainImage: "customer_designs/Unikai/UNIKAI-4.jpg",
        detailImages: [
          "customer_designs/Unikai/UNIKAI-1.jpg",
          "customer_designs/Unikai/UNIKAI-9.jpg"
        ]
      },
      {
        id: 3,
        name: "牛奶包装设计 #MILK-2024",
        materialNumber: "NP-20345-3",
        format: "200S",
        material: "PE-Al-Paper",
        machine: "Tetra Pak A3",
        filling: "UHT牛奶",
        paperRequirement: "FSC认证原纸",
        certifications: ["PEFC", "FSC"],
        quantity: 100,
        unit: "箱",
        unitPrice: 50.00,
        subtotal: 5000.00,
        mainImage: "customer_designs/RFG/RFG-1.jpg",
        detailImages: [
          "customer_designs/RFG/RFG-2.jpg",
          "customer_designs/RFG/RFG-3.jpg",
          "customer_designs/RFG/RFG-4.jpg"
        ]
      }
    ];
    
    // 渲染SKU表格
    function renderSKUTable(skuData) {
      const tbody = document.getElementById('skuTableBody');
      const container = document.getElementById('skuDetailContainer');
      if (!tbody) return;
      
      // 清空之前的详情
      if (container) {
        container.innerHTML = '';
      }
      
      tbody.innerHTML = skuData.map((sku, index) => `
        <tr class="border-b border-gray-200 hover:bg-blue-50 transition cursor-pointer sku-table-row group" data-sku-id="${sku.id}">
          <td class="px-4 py-3 text-sm text-gray-800 font-medium">${sku.name}</td>
          <td class="px-4 py-3 text-sm text-gray-600">${sku.materialNumber}</td>
          <td class="px-4 py-3 text-sm text-gray-600">${sku.format}</td>
          <td class="px-4 py-3 text-sm text-gray-800 text-right">${sku.quantity} ${sku.unit}</td>
          <td class="px-4 py-3 text-sm text-gray-800 text-right">¥${sku.unitPrice.toFixed(2)}/${sku.unit}</td>
          <td class="px-4 py-3 text-sm font-semibold text-green-600 text-right">¥${sku.subtotal.toFixed(2)}</td>
          <td class="px-4 py-3 text-center">
            <button class="view-sku-detail-btn text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded hover:bg-blue-100 transition" data-sku-id="${sku.id}">
              <span class="iconify inline-block" data-icon="mdi:chevron-down"></span> 查看详情
            </button>
          </td>
        </tr>
      `).join('');
      
      // 绑定点击事件 - 整行和按钮都可以点击
      document.querySelectorAll('.sku-table-row').forEach(row => {
        row.addEventListener('click', (e) => {
          // 如果点击的是按钮，不阻止默认行为
          if (e.target.closest('.view-sku-detail-btn')) {
            return;
          }
          const skuId = parseInt(row.dataset.skuId);
          if (skuId) {
            toggleSKUDetail(skuId, skuData);
          }
        });
      });
      
      // 单独绑定按钮点击事件
      document.querySelectorAll('.view-sku-detail-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const skuId = parseInt(btn.dataset.skuId);
          if (skuId) {
            toggleSKUDetail(skuId, skuData);
          }
        });
      });
    }
    
    // 切换SKU详情显示
    function toggleSKUDetail(skuId, skuData) {
      const sku = skuData.find(s => s.id === skuId);
      if (!sku) return;
      
      const container = document.getElementById('skuDetailContainer');
      if (!container) return;
      
      const detailId = `sku-detail-${skuId}`;
      let detailElement = document.getElementById(detailId);
      const btn = document.querySelector(`.view-sku-detail-btn[data-sku-id="${skuId}"]`);
      const row = document.querySelector(`.sku-table-row[data-sku-id="${skuId}"]`);
      
      if (detailElement) {
        // 如果已存在，则切换显示/隐藏
        const isHidden = detailElement.classList.contains('hidden');
        detailElement.classList.toggle('hidden');
        
        // 更新按钮和行的样式
        if (btn) {
          const icon = isHidden ? 'mdi:chevron-up' : 'mdi:chevron-down';
          btn.innerHTML = `<span class="iconify inline-block transition-transform" data-icon="${icon}"></span> ${isHidden ? '隐藏详情' : '查看详情'}`;
        }
        if (row) {
          if (isHidden) {
            row.classList.add('bg-blue-50');
          } else {
            row.classList.remove('bg-blue-50');
          }
        }
        
        // 滚动到详情区域
        if (isHidden) {
          setTimeout(() => {
            detailElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }, 100);
        }
      } else {
        // 创建新的详情元素
        detailElement = document.createElement('div');
        detailElement.id = detailId;
        detailElement.className = 'bg-white rounded-xl border border-gray-200 p-6 shadow-sm';
        
        const certificationsHtml = sku.certifications && sku.certifications.length > 0 
          ? sku.certifications.map(cert => 
              `<span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">${cert}</span>`
            ).join('')
          : '<span class="text-gray-400 text-xs">无</span>';
        
        const detailImagesHtml = sku.detailImages && sku.detailImages.length > 0
          ? sku.detailImages.map((img, idx) => 
              `<img alt="细节图${idx + 1}" class="w-20 h-20 object-cover rounded cursor-pointer border-2 border-gray-300 hover:border-blue-600 transition" onclick="document.getElementById('orderMainImg${skuId}').src=this.src" src="${img}"/>`
            ).join('')
          : '';
        
        detailElement.innerHTML = `
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- 左侧：产品图片 -->
            <div>
              <div class="bg-gray-100 rounded-xl p-4">
                <img alt="产品主图" class="w-full h-80 object-cover rounded-lg mb-3" id="orderMainImg${skuId}" src="${sku.mainImage || 'customer_designs/RFG/RFG-1.jpg'}"/>
                ${detailImagesHtml ? `<div class="flex space-x-2 overflow-x-auto">${detailImagesHtml}</div>` : ''}
              </div>
            </div>
            <!-- 右侧：产品规格信息 -->
            <div>
              <div class="mb-4">
                <h5 class="font-semibold text-lg text-gray-800 mb-2">SKU #${sku.id}: ${sku.name}</h5>
                <div class="text-sm text-gray-600 mb-4">物料号: ${sku.materialNumber}</div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4 mb-4">
                <h6 class="font-semibold text-gray-800 mb-3">产品规格</h6>
                <div class="grid grid-cols-2 gap-3 mb-3">
                  <div>
                    <label class="block text-gray-600 mb-1 text-xs">规格选择 (Format)</label>
                    <div class="text-gray-800 font-medium text-sm">${sku.format}</div>
                  </div>
                  <div>
                    <label class="block text-gray-600 mb-1 text-xs">材料结构</label>
                    <div class="text-gray-800 font-medium text-sm">${sku.material}</div>
                  </div>
                </div>
                <h6 class="font-semibold text-gray-800 mb-3 mt-4">产品参数</h6>
                <div class="grid grid-cols-2 gap-3">
                  <div>
                    <label class="block text-gray-600 mb-1 text-xs">灌装机型号</label>
                    <div class="text-gray-800 font-medium text-sm">${sku.machine}</div>
                  </div>
                  <div>
                    <label class="block text-gray-600 mb-1 text-xs">填充物类型</label>
                    <div class="text-gray-800 font-medium text-sm">${sku.filling}</div>
                  </div>
                  <div>
                    <label class="block text-gray-600 mb-1 text-xs">原纸要求</label>
                    <div class="text-gray-800 font-medium text-sm">${sku.paperRequirement || '标准原纸'}</div>
                  </div>
                  <div>
                    <label class="block text-gray-600 mb-1 text-xs">认证要求</label>
                    <div class="flex flex-wrap gap-2">
                      ${certificationsHtml}
                    </div>
                  </div>
                </div>
              </div>
              <div class="bg-blue-50 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-gray-600 text-sm">数量:</span>
                  <span class="font-medium">${sku.quantity} ${sku.unit}</span>
                </div>
                <div class="flex justify-between items-center mb-2">
                  <span class="text-gray-600 text-sm">单价:</span>
                  <span class="font-medium">¥${sku.unitPrice.toFixed(2)}/${sku.unit}</span>
                </div>
                <div class="flex justify-between items-center pt-2 border-t border-blue-200">
                  <span class="text-gray-600 font-semibold">小计:</span>
                  <span class="font-bold text-green-600">¥${sku.subtotal.toFixed(2)}</span>
                </div>
              </div>
            </div>
          </div>
        `;
        
        container.appendChild(detailElement);
        
        // 更新按钮和行的样式
        if (btn) {
          btn.innerHTML = `<span class="iconify inline-block transition-transform" data-icon="mdi:chevron-up"></span> 隐藏详情`;
        }
        if (row) {
          row.classList.add('bg-blue-50');
        }
        
        // 滚动到详情区域
        setTimeout(() => {
          detailElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 100);
      }
    }
    
    // 订单详情section控制
    const ordersList = document.getElementById('ordersList');
    const orderDetail = document.getElementById('orderDetail');
    const orderDetailContent = document.getElementById('orderDetailContent');
    const complaintPage = document.getElementById('complaintPage');
    const backToOrdersList = document.getElementById('backToOrdersList');
    const cancelComplaintBtn = document.getElementById('cancelComplaintBtn');
    const breadcrumbOrders = document.getElementById('breadcrumbOrders');
    const breadcrumbOrders2 = document.getElementById('breadcrumbOrders2');
    const breadcrumbOrderDetail = document.getElementById('breadcrumbOrderDetail');
    
    // 打开订单详情
    document.querySelectorAll('.view-order-btn').forEach(button => {
      button.addEventListener('click', () => {
        const orderId = button.dataset.orderId;
        // 这里可以根据orderId加载不同的订单数据
        document.getElementById('orderDetailNumber').textContent = orderId;
        document.getElementById('complaintOrderNumber').textContent = orderId;
        ordersList.classList.add('hidden');
        orderDetail.classList.remove('hidden');
        orderDetailContent.classList.remove('hidden');
        complaintPage.classList.add('hidden');
        
        // 清除之前的详情展开状态
        const container = document.getElementById('skuDetailContainer');
        if (container) {
          container.innerHTML = '';
        }
        
        // 渲染SKU表格
        renderSKUTable(orderSKUData);
      });
    });
    
    // 返回订单列表
    if (backToOrdersList) {
      backToOrdersList.addEventListener('click', () => {
        orderDetail.classList.add('hidden');
        orderDetailContent.classList.add('hidden');
        complaintPage.classList.add('hidden');
        ordersList.classList.remove('hidden');
      });
    }
    
    // 发起客诉按钮
    const openComplaintBtn = document.getElementById('openComplaintBtn');
    if (openComplaintBtn) {
      openComplaintBtn.addEventListener('click', () => {
        orderDetailContent.classList.add('hidden');
        complaintPage.classList.remove('hidden');
      });
    }
    
    if (cancelComplaintBtn) {
      cancelComplaintBtn.addEventListener('click', () => {
        complaintPage.classList.add('hidden');
        orderDetailContent.classList.remove('hidden');
      });
    }
    
    // 面包屑导航 - 返回订单列表
    if (breadcrumbOrders) {
      breadcrumbOrders.addEventListener('click', (e) => {
        e.preventDefault();
        orderDetail.classList.add('hidden');
        orderDetailContent.classList.add('hidden');
        complaintPage.classList.add('hidden');
        ordersList.classList.remove('hidden');
      });
    }
    
    if (breadcrumbOrders2) {
      breadcrumbOrders2.addEventListener('click', (e) => {
        e.preventDefault();
        orderDetail.classList.add('hidden');
        orderDetailContent.classList.add('hidden');
        complaintPage.classList.add('hidden');
        ordersList.classList.remove('hidden');
      });
    }
    
    // 面包屑导航 - 返回订单详情
    if (breadcrumbOrderDetail) {
      breadcrumbOrderDetail.addEventListener('click', (e) => {
        e.preventDefault();
        complaintPage.classList.add('hidden');
        orderDetailContent.classList.remove('hidden');
      });
    }
    
    // 画稿管理子模块切换
    document.querySelectorAll('.submenu-tab-btn').forEach(button => {
      button.addEventListener('click', () => {
        const targetSection = button.dataset.section;
        // helloworld
        
        // 移除所有激活状态
        document.querySelectorAll('.submenu-tab-btn').forEach(btn => {
          btn.classList.remove('border-b-2', 'border-blue-600', 'text-blue-700');
        });
        document.querySelectorAll('.submenu-section').forEach(section => {
          section.classList.remove('submenu-section-active');
        });
        
        // 添加当前激活状态
        button.classList.add('border-b-2', 'border-blue-600', 'text-blue-700');
        document.getElementById(targetSection).classList.add('submenu-section-active');
      });
    });
    
    // 规格展开/折叠
    document.querySelectorAll('.spec-toggle').forEach(btn => {
      btn.addEventListener('click', function() {
        const specId = this.getAttribute('data-spec');
        const content = document.getElementById(specId);
        const icon = this.querySelector('.iconify');
        
        if (content) {
          content.classList.toggle('hidden');
          if (icon) {
            icon.style.transform = content.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(90deg)';
          }
        }
      });
    });

    // SKU展开/折叠
    document.querySelectorAll('.sku-toggle').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.stopPropagation();
        const skuId = this.getAttribute('data-sku');
        const content = document.getElementById(skuId);
        const icon = this.querySelector('.iconify');
        
        if (content) {
          content.classList.toggle('hidden');
          if (icon) {
            icon.style.transform = content.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(90deg)';
          }
        }
      });
    });

    // 文件上传功能
    const previewUpload = document.querySelector('.preview-upload-container');
    const previewInput = document.getElementById('preview-file-input');
    const previewContainer = document.getElementById('preview-container');
    const previewImage = document.getElementById('preview-image');
    const previewFilename = document.getElementById('preview-filename');
    const previewSize = document.getElementById('preview-size');

    if (previewUpload && previewInput) {
      previewUpload.addEventListener('click', () => {
        previewInput.click();
      });

      previewInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            if (previewImage) previewImage.src = e.target.result;
            if (previewFilename) previewFilename.textContent = file.name;
            if (previewSize) previewSize.textContent = formatFileSize(file.size);
            if (previewContainer) previewContainer.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // 原文件上传
    const originalUpload = document.querySelector('.original-upload-container');
    const originalInput = document.getElementById('original-file-input');
    const originalInfoContainer = document.getElementById('original-info-container');
    const originalFilesList = document.getElementById('original-files-list');
    const originalFileCount = document.getElementById('original-file-count');
    const originalTotalSize = document.getElementById('original-total-size');
    
    let uploadedFiles = [];

    if (originalUpload && originalInput) {
      originalUpload.addEventListener('click', () => {
        originalInput.click();
      });

      originalInput.addEventListener('change', (e) => {
        const newFiles = Array.from(e.target.files);
        if (newFiles.length > 0) {
          uploadedFiles = uploadedFiles.concat(newFiles);
          updateFilesList();
        }
      });
    }

    function updateFilesList() {
      if (!originalFilesList) return;
      originalFilesList.innerHTML = '';
      let totalSize = 0;
      
      uploadedFiles.forEach((file, index) => {
        totalSize += file.size;
        const fileItem = document.createElement('div');
        fileItem.className = 'flex items-center justify-between p-3 bg-orange-50 rounded border border-orange-200';
        fileItem.innerHTML = `
          <div class="flex items-center flex-1">
            <span class="iconify text-orange-500 mr-2" data-icon="mdi:file-document"></span>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-gray-800 truncate">${file.name}</p>
              <p class="text-xs text-gray-600">${formatFileSize(file.size)}</p>
            </div>
          </div>
          <button type="button" class="ml-2 text-orange-500 hover:text-orange-700 remove-file" data-index="${index}">
            <span class="iconify" data-icon="mdi:close-circle"></span>
          </button>
        `;
        originalFilesList.appendChild(fileItem);
      });
      
      if (originalFileCount) originalFileCount.textContent = uploadedFiles.length;
      if (originalTotalSize) originalTotalSize.textContent = formatFileSize(totalSize);
      
      if (originalInfoContainer && uploadedFiles.length > 0) {
        originalInfoContainer.classList.remove('hidden');
      }
      
      document.querySelectorAll('.remove-file').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const index = parseInt(btn.getAttribute('data-index'));
          uploadedFiles.splice(index, 1);
          updateFilesList();
        });
      });
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    // 公司信息模态框功能
    (function() {
      const companyInfoBtn = document.getElementById('companyInfoBtn');
      const companyInfoModal = document.getElementById('companyInfoModal');
      const closeCompanyInfoModal = document.getElementById('closeCompanyInfoModal');
      const closeCompanyInfoModalBtn = document.getElementById('closeCompanyInfoModalBtn');
      const companyNameInput = document.getElementById('companyNameInput');
      const companyNameDisplay = document.getElementById('companyNameDisplay');
      const editCompanyNameBtn = document.getElementById('editCompanyNameBtn');
      const saveCompanyNameBtn = document.getElementById('saveCompanyNameBtn');
      const cancelCompanyNameBtn = document.getElementById('cancelCompanyNameBtn');
      const companyNameEditActions = document.getElementById('companyNameEditActions');
      
      let originalCompanyName = companyNameInput ? companyNameInput.value : '';
      
      // 打开模态框
      if (companyInfoBtn && companyInfoModal) {
        companyInfoBtn.addEventListener('click', () => {
          companyInfoModal.classList.remove('hidden');
          // 重置编辑状态
          if (companyNameInput) {
            companyNameInput.disabled = true;
            companyNameInput.value = originalCompanyName;
          }
          if (companyNameEditActions) {
            companyNameEditActions.classList.add('hidden');
          }
        });
      }
      
      // 关闭模态框
      function closeModal() {
        if (companyInfoModal) {
          companyInfoModal.classList.add('hidden');
        }
        // 重置编辑状态
        if (companyNameInput) {
          companyNameInput.disabled = true;
          companyNameInput.value = originalCompanyName;
          companyNameInput.classList.remove('bg-white');
          companyNameInput.classList.add('bg-gray-50', 'cursor-not-allowed');
        }
        if (companyNameEditActions) {
          companyNameEditActions.classList.add('hidden');
        }
      }
      
      if (closeCompanyInfoModal) {
        closeCompanyInfoModal.addEventListener('click', closeModal);
      }
      
      if (closeCompanyInfoModalBtn) {
        closeCompanyInfoModalBtn.addEventListener('click', closeModal);
      }
      
      // 点击模态框外部关闭
      if (companyInfoModal) {
        companyInfoModal.addEventListener('click', (e) => {
          if (e.target === companyInfoModal) {
            closeModal();
          }
        });
      }
      
      // 编辑公司名称
      if (editCompanyNameBtn && companyNameInput) {
        editCompanyNameBtn.addEventListener('click', () => {
          companyNameInput.disabled = false;
          companyNameInput.classList.remove('bg-gray-50', 'cursor-not-allowed');
          companyNameInput.classList.add('bg-white');
          companyNameInput.focus();
          companyNameInput.select();
          if (companyNameEditActions) {
            companyNameEditActions.classList.remove('hidden');
          }
        });
      }
      
      // 保存公司名称
      if (saveCompanyNameBtn && companyNameInput && companyNameDisplay) {
        saveCompanyNameBtn.addEventListener('click', () => {
          const newName = companyNameInput.value.trim();
          if (!newName) {
            alert('公司名称不能为空');
            companyNameInput.focus();
            return;
          }
          
          // 这里应该调用API保存公司名称
          // 示例：await updateCompanyName(newName);
          // 实际使用时，可以这样：
          // try {
          //   const response = await fetch('/api/company/name', {
          //     method: 'PUT',
          //     headers: { 'Content-Type': 'application/json' },
          //     body: JSON.stringify({ companyName: newName })
          // });
          //   if (!response.ok) throw new Error('保存失败');
          // } catch (error) {
          //   alert('保存失败，请稍后重试');
          //   return;
          // }
          
          // 更新显示
          originalCompanyName = newName;
          companyNameDisplay.textContent = newName;
          
          // 禁用输入框并隐藏操作按钮
          companyNameInput.disabled = true;
          companyNameInput.classList.remove('bg-white');
          companyNameInput.classList.add('bg-gray-50', 'cursor-not-allowed');
          if (companyNameEditActions) {
            companyNameEditActions.classList.add('hidden');
          }
          
          // 显示成功提示
          alert('公司名称修改成功！');
        });
      }
      
      // 取消编辑公司名称
      if (cancelCompanyNameBtn && companyNameInput) {
        cancelCompanyNameBtn.addEventListener('click', () => {
          companyNameInput.value = originalCompanyName;
          companyNameInput.disabled = true;
          companyNameInput.classList.remove('bg-white');
          companyNameInput.classList.add('bg-gray-50', 'cursor-not-allowed');
          if (companyNameEditActions) {
            companyNameEditActions.classList.add('hidden');
          }
        });
      }
      
      // ESC键关闭模态框
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && companyInfoModal && !companyInfoModal.classList.contains('hidden')) {
          closeModal();
        }
      });
    })();
  </script>
</body>
</html>

